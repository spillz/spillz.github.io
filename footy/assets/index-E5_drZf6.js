var N=t=>{throw TypeError(t)};var rA=(t,A,i)=>A.has(t)||N("Cannot "+i);var O=(t,A,i)=>A.has(t)?N("Cannot add the same private member more than once"):A instanceof WeakSet?A.add(t):A.set(t,i);var S=(t,A,i)=>(rA(t,A,"access private method"),i);(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();var D=1e-6,Q=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,A=arguments.length;A--;)t+=arguments[A]*arguments[A];return Math.sqrt(t)});function y(){var t=new Q(16);return Q!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,A,i){var e=i[0],s=i[1],r=i[2],o,n,h,a,g,E,u,l,v,c,p,d;return A===t?(t[12]=A[0]*e+A[4]*s+A[8]*r+A[12],t[13]=A[1]*e+A[5]*s+A[9]*r+A[13],t[14]=A[2]*e+A[6]*s+A[10]*r+A[14],t[15]=A[3]*e+A[7]*s+A[11]*r+A[15]):(o=A[0],n=A[1],h=A[2],a=A[3],g=A[4],E=A[5],u=A[6],l=A[7],v=A[8],c=A[9],p=A[10],d=A[11],t[0]=o,t[1]=n,t[2]=h,t[3]=a,t[4]=g,t[5]=E,t[6]=u,t[7]=l,t[8]=v,t[9]=c,t[10]=p,t[11]=d,t[12]=o*e+g*s+v*r+A[12],t[13]=n*e+E*s+c*r+A[13],t[14]=h*e+u*s+p*r+A[14],t[15]=a*e+l*s+d*r+A[15]),t}function V(t,A,i){var e=i[0],s=i[1],r=i[2];return t[0]=A[0]*e,t[1]=A[1]*e,t[2]=A[2]*e,t[3]=A[3]*e,t[4]=A[4]*s,t[5]=A[5]*s,t[6]=A[6]*s,t[7]=A[7]*s,t[8]=A[8]*r,t[9]=A[9]*r,t[10]=A[10]*r,t[11]=A[11]*r,t[12]=A[12],t[13]=A[13],t[14]=A[14],t[15]=A[15],t}function oA(t,A,i){var e=Math.sin(i),s=Math.cos(i),r=A[4],o=A[5],n=A[6],h=A[7],a=A[8],g=A[9],E=A[10],u=A[11];return A!==t&&(t[0]=A[0],t[1]=A[1],t[2]=A[2],t[3]=A[3],t[12]=A[12],t[13]=A[13],t[14]=A[14],t[15]=A[15]),t[4]=r*s+a*e,t[5]=o*s+g*e,t[6]=n*s+E*e,t[7]=h*s+u*e,t[8]=a*s-r*e,t[9]=g*s-o*e,t[10]=E*s-n*e,t[11]=u*s-h*e,t}function nA(t,A,i,e,s){var r=1/Math.tan(A/2),o;return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(o=1/(e-s),t[10]=(s+e)*o,t[14]=2*s*e*o):(t[10]=-1,t[14]=-2*e),t}var hA=nA;function aA(t,A,i,e){var s,r,o,n,h,a,g,E,u,l,v=A[0],c=A[1],p=A[2],d=e[0],m=e[1],f=e[2],I=i[0],B=i[1],C=i[2];return Math.abs(v-I)<D&&Math.abs(c-B)<D&&Math.abs(p-C)<D?Z(t):(g=v-I,E=c-B,u=p-C,l=1/Math.hypot(g,E,u),g*=l,E*=l,u*=l,s=m*u-f*E,r=f*g-d*u,o=d*E-m*g,l=Math.hypot(s,r,o),l?(l=1/l,s*=l,r*=l,o*=l):(s=0,r=0,o=0),n=E*o-u*r,h=u*s-g*o,a=g*r-E*s,l=Math.hypot(n,h,a),l?(l=1/l,n*=l,h*=l,a*=l):(n=0,h=0,a=0),t[0]=s,t[1]=n,t[2]=g,t[3]=0,t[4]=r,t[5]=h,t[6]=E,t[7]=0,t[8]=o,t[9]=a,t[10]=u,t[11]=0,t[12]=-(s*v+r*c+o*p),t[13]=-(n*v+h*c+a*p),t[14]=-(g*v+E*c+u*p),t[15]=1,t)}function cA(){var t=new Q(3);return Q!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function q(t){var A=new Q(3);return A[0]=t[0],A[1]=t[1],A[2]=t[2],A}function z(t){var A=t[0],i=t[1],e=t[2];return Math.hypot(A,i,e)}function _(t,A,i){var e=new Q(3);return e[0]=t,e[1]=A,e[2]=i,e}function H(t,A,i,e){return t[0]=A,t[1]=i,t[2]=e,t}function j(t,A,i){return t[0]=A[0]+i[0],t[1]=A[1]+i[1],t[2]=A[2]+i[2],t}function X(t,A,i){return t[0]=A[0]*i,t[1]=A[1]*i,t[2]=A[2]*i,t}function Y(t,A,i,e){return t[0]=A[0]+i[0]*e,t[1]=A[1]+i[1]*e,t[2]=A[2]+i[2]*e,t}function lA(t,A){var i=A[0],e=A[1],s=A[2],r=i*i+e*e+s*s;return r>0&&(r=1/Math.sqrt(r)),t[0]=A[0]*r,t[1]=A[1]*r,t[2]=A[2]*r,t}(function(){var t=cA();return function(A,i,e,s,r,o){var n,h;for(i||(i=3),e||(e=0),s?h=Math.min(s*i+e,A.length):h=A.length,n=e;n<h;n+=i)t[0]=A[n],t[1]=A[n+1],t[2]=A[n+2],r(t,t,o),A[n]=t[0],A[n+1]=t[1],A[n+2]=t[2];return A}})();function gA(){var t=new Q(2);return Q!=Float32Array&&(t[0]=0,t[1]=0),t}function dA(t,A){var i=new Q(2);return i[0]=t,i[1]=A,i}(function(){var t=gA();return function(A,i,e,s,r,o){var n,h;for(i||(i=2),e||(e=0),s?h=Math.min(s*i+e,A.length):h=A.length,n=e;n<h;n+=i)t[0]=A[n],t[1]=A[n+1],r(t,t,o),A[n]=t[0],A[n+1]=t[1];return A}})();function fA(t,A){const i=t.pos[0]-A.pos[0],e=t.pos[1]-A.pos[1],s=t.pos[2]-A.pos[2],r=i*i+e*e+s*s,o=.5*Math.sqrt(t.width*t.width+t.height*t.height),n=.5*Math.sqrt(A.width*A.width+A.height*A.height),h=o+n;return r<=h*h}class G{constructor(A){this.pos=A,this.vel=[0,0,0],this.width=1.6,this.height=2.4,this.usesGravity=!0,this.gravity=[0,-9.8,0],this.bounces=!1,this.restitution=.4,this.floorY=0}update(A,i){this.usesGravity&&Y(this.vel,this.vel,this.gravity,A),Y(this.pos,this.pos,this.vel,A),this.pos[1]<this.floorY&&(this.pos[1]=this.floorY,this.bounces&&Math.abs(this.vel[1])>.5?this.vel[1]=-this.vel[1]*this.restitution:this.vel[1]=0)}render(A){A.renderSprite(this.pos,this.width,this.height,1,0)}collidesWith(A){return fA(this,A)}}class EA extends G{constructor(A){super(A),this.width=1.6,this.height=2.4}update(A,i){const e=i.controls,s=i.entities.find(r=>r instanceof J);if(e.state.moveX!==0||e.state.moveZ!==0){const r=e.state.moveX,o=e.state.moveZ,n=Math.sqrt(r*r+o*o);n>0&&(this.vel[0]=r/n*5,this.vel[2]=o/n*5)}if(super.update(A,i),!s){console.warn("No ball found in game entities");return}if(!s.carried&&s.collidesWith(this)&&s.pickup(this),s.carried&&s.carrier===this&&e.state.kick){let r=e.state.aimTarget??dA(0,-10);if(r){const o=_(r[0],0,r[1]);z(o)>.1&&(j(s.pos,this.pos,[0,0,-3]),o[1]=z(o),lA(o,o),s.launch(o,18))}}}}class J extends G{constructor(A){super(A),this.carried=!1,this.carrier=null,this.width=1.6,this.height=2.4,this.bounces=!0}update(A,i){if(this.carried&&this.carrier){const e=_(0,0,-1),s=q(this.carrier.pos);j(this.pos,s,e)}else super.update(A,i),this.pos[1]<=this.floorY&&X(this.vel,this.vel,.99)}render(A){A.renderSprite(this.pos,this.width,this.height,0,1)}pickup(A){this.carried=!0,this.carrier=A,H(this.pos,A.pos[0],A.pos[1],A.pos[2]-1),H(this.vel,0,0,0)}launch(A,i){this.carried=!1,this.carrier=null,X(this.vel,A,i)}}class uA{constructor(A=[0,.001,0]){this.pos=q(A),this.size=2,this.spriteCoord=[0,3]}setPosition(A){this.pos[0]=A[0],this.pos[2]=A[2]}render(A){const i=A.gl;i.useProgram(A.program),i.bindVertexArray(A.quadVao);const[e,s]=this.spriteCoord,r=e/A.sheetCols,o=s/A.sheetRows,n=(e+1)/A.sheetCols,h=(s+1)/A.sheetRows;i.uniform4f(A.uTileUV,r,o,n,h);const a=y();P(a,a,[this.pos[0],.001,this.pos[2]]),oA(a,a,-Math.PI/2),V(a,a,[this.size,this.size,1]),i.uniformMatrix4fv(A.uModel,!1,a),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)}}function k(t,A,i){const e=(n,h)=>{const a=t.createShader(h);if(!a)throw new Error("Failed to create shader");if(t.shaderSource(a,n),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(a));return a},s=e(A,t.VERTEX_SHADER),r=e(i,t.FRAGMENT_SHADER),o=t.createProgram();if(t.attachShader(o,s),t.attachShader(o,r),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(o));return o}async function pA(t){const A=new Image;return A.src=t,await A.decode(),A}function vA(t,A,i,e=1){const o=t*2/1.6/e,n=A*2/2/e,h=[0,0,0,.5,.5],a=[];for(let g=0;g<=i;g++){const E=g/i*2*Math.PI,u=Math.cos(E)*t,l=Math.sin(E)*A,v=u/(t*2)*o+.5,c=l/(A*2)*n+.5;h.push(u,0,l,v,c),g>0&&a.push(0,g,g+1)}return{vertices:new Float32Array(h),indices:new Uint16Array(a)}}function mA(t=160,A=170,i=50,e=50,s=.4){const r=[],o=[];let n=0;const h=(c,p,d,m,f)=>{const I=d-c,B=m-p,C=Math.hypot(I,B),M=-B/C,T=I/C,w=f/2,b=c+M*w,U=p+T*w,L=c-M*w,R=p-T*w,tA=d+M*w,eA=m+T*w,iA=d-M*w,sA=m-T*w;r.push(b,0,U,tA,0,eA,iA,0,sA,L,0,R),o.push(n,n+1,n+2,n,n+2,n+3),n+=4},a=t/2,g=A/2,E=64;for(let c=0;c<E;c++){const p=c/E*2*Math.PI,d=(c+1)/E*2*Math.PI,m=Math.cos(p)*a,f=Math.sin(p)*g,I=Math.cos(d)*a,B=Math.sin(d)*g;h(m,f,I,B,s)}const u=[[-e/2,-e/2],[e/2,-e/2],[e/2,e/2],[-e/2,e/2]];for(let c=0;c<4;c++){const[p,d]=u[c],[m,f]=u[(c+1)%4];h(p,d,m,f,s)}function l(c){const p=c>0?-1:1,d=[];for(let m=0;m<=1e3;m++){const f=-Math.PI+m/1e3*2*Math.PI,I=Math.sin(f)*i,B=c+p*Math.cos(f)*i,C=I/a,M=B/g;C*C+M*M<=1&&d.push(f)}return d.length===0?[-Math.PI/3,Math.PI/3]:[d[0],d[d.length-1]]}const v=40;for(let c of[-A/2,A/2]){const p=c>0?-1:1,[d,m]=l(c);for(let f=0;f<v;f++){const I=d+f/v*(m-d),B=d+(f+1)/v*(m-d),C=Math.sin(I)*i,M=c+p*Math.cos(I)*i,T=Math.sin(B)*i,w=c+p*Math.cos(B)*i;h(C,M,T,w,s)}}return{vertices:new Float32Array(r),indices:new Uint16Array(o)}}const F=170,IA=80,W=F/2;class BA{constructor(A,i,e){this.gl=A,this.canvas=i,this.spriteSheet=e,this.sheetCols=32,this.sheetRows=32,this.setupMainProgram(),this.setupLineProgram(),this.setupSpriteGeometry(),this.setupField(),this.setupGoalposts(),this.setupCamera(),this.setupSpritesheet(),A.enable(A.DEPTH_TEST),A.depthFunc(A.LEQUAL)}setupSpritesheet(){const A=this.gl;A.pixelStorei(A.UNPACK_ALIGNMENT,1),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,!1),this.texture=A.createTexture(),A.bindTexture(A.TEXTURE_2D,this.texture),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,this.spriteSheet),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,this.texture)}setupMainProgram(){const A=`#version 300 es
      in vec3 a_position;
      in vec2 a_texcoord;
      uniform mat4 u_projection, u_view, u_model;
      out vec2 v_texcoord;
      void main() {
        gl_Position = u_projection * u_view * u_model * vec4(a_position, 1.0);
        v_texcoord = a_texcoord;
      }`,i=`#version 300 es
precision mediump float;

uniform sampler2D u_texture;
uniform vec4 u_tileUV;

in vec2 v_texcoord;
out vec4 outColor;

void main() {
  vec2 tileUV = mod(v_texcoord, 1.0);
  vec2 texCoord = mix(u_tileUV.xy, u_tileUV.zw, tileUV);
  vec4 texColor = texture(u_texture, texCoord);

  if (texColor.a < 0.01) discard; // Skip fully transparent fragments

  outColor = texColor;
}
`;this.program=k(this.gl,A,i),this.uProjection=this.gl.getUniformLocation(this.program,"u_projection"),this.uView=this.gl.getUniformLocation(this.program,"u_view"),this.uModel=this.gl.getUniformLocation(this.program,"u_model"),this.uTileUV=this.gl.getUniformLocation(this.program,"u_tileUV"),this.uTexture=this.gl.getUniformLocation(this.program,"u_texture"),this.aPos=this.gl.getAttribLocation(this.program,"a_position"),this.aUV=this.gl.getAttribLocation(this.program,"a_texcoord")}setupLineProgram(){const A=`#version 300 es
    in vec3 a_position;
    uniform mat4 u_projection;
    uniform mat4 u_view;
    uniform mat4 u_model;
    void main() {
    gl_Position = u_projection * u_view * u_model * vec4(a_position, 1.0);
    }`,i=`#version 300 es
    precision mediump float;
    out vec4 outColor;
    void main() {
    outColor = vec4(1, 1, 1, 1);
    }`;this.lineProgram=k(this.gl,A,i),this.lineProj=this.gl.getUniformLocation(this.lineProgram,"u_projection"),this.lineView=this.gl.getUniformLocation(this.lineProgram,"u_view"),this.lineModel=this.gl.getUniformLocation(this.lineProgram,"u_model"),this.linePos=this.gl.getAttribLocation(this.lineProgram,"a_position")}setupSpriteGeometry(){const A=this.gl;A.enable(A.BLEND),A.blendFunc(A.SRC_ALPHA,A.ONE_MINUS_SRC_ALPHA),A.depthMask(!0);const i=new Float32Array([-.5,0,0,1,.5,0,1,1,.5,1,1,0,-.5,1,0,0]),e=new Uint16Array([0,1,2,0,2,3]);this.quadVao=this.gl.createVertexArray(),this.gl.bindVertexArray(this.quadVao);const s=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPos,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(this.aPos),this.gl.vertexAttribPointer(this.aUV,2,this.gl.FLOAT,!1,16,8),this.gl.enableVertexAttribArray(this.aUV);const r=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.STATIC_DRAW)}setupField(){const A=this.gl,{vertices:i,indices:e}=vA(IA,W,64,16);this.fieldVao=this.gl.createVertexArray(),this.gl.bindVertexArray(this.fieldVao);const s=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPos,3,this.gl.FLOAT,!1,20,0),this.gl.enableVertexAttribArray(this.aPos),this.gl.vertexAttribPointer(this.aUV,2,this.gl.FLOAT,!1,20,12),this.gl.enableVertexAttribArray(this.aUV);const r=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,r),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.gl.STATIC_DRAW),this.fieldIndices=e.length,this.fieldLineMesh=mA(),this.lineVao=A.createVertexArray(),A.bindVertexArray(this.lineVao);const o=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,o),A.bufferData(A.ARRAY_BUFFER,this.fieldLineMesh.vertices,A.STATIC_DRAW);const n=A.createBuffer();A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,n),A.bufferData(A.ELEMENT_ARRAY_BUFFER,this.fieldLineMesh.indices,A.STATIC_DRAW),A.vertexAttribPointer(this.linePos,3,A.FLOAT,!1,12,0),A.enableVertexAttribArray(this.linePos)}setupGoalposts(){this.goalPostPositions=[[-9,0,F],[-3,0,F],[3,0,F],[9,0,F],[-9,0,0],[-3,0,0],[3,0,0],[9,0,0]]}setupCamera(){this.projection=y(),hA(this.projection,Math.PI/4,this.canvas.width/this.canvas.height,.1,1e3),this.view=y(),this.model=y()}renderSprite(A,i,e,s,r){const{gl:o,program:n,quadVao:h,uModel:a,uTileUV:g,sheetCols:E,sheetRows:u}=this;o.useProgram(n),o.bindVertexArray(h);const l=y();P(l,l,A),V(l,l,[i,e,1]),o.uniformMatrix4fv(a,!1,l);const v=s/E,c=r/u,p=(s+1)/E,d=(r+1)/u;o.uniform4f(g,v,c,p,d),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0)}renderScene(A,i){const e=this.gl;e.viewport(0,0,this.canvas.width,this.canvas.height),e.clearColor(.2,.6,.2,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);const s=_(A.player.pos[0],A.player.pos[1]+10,A.player.pos[2]+15),r=_(A.player.pos[0],A.player.pos[1],A.player.pos[2]-20);aA(this.view,s,r,[0,1,0]),e.useProgram(this.program),e.uniformMatrix4fv(this.uProjection,!1,this.projection),e.uniformMatrix4fv(this.uView,!1,this.view),e.activeTexture(e.TEXTURE0),e.uniform1i(this.uTexture,0),e.bindVertexArray(this.fieldVao),Z(this.model),P(this.model,this.model,[0,0,W]),e.uniformMatrix4fv(this.uModel,!1,this.model);const o=0,n=2,h=o/this.sheetCols,a=n/this.sheetRows,g=(o+1)/this.sheetCols,E=(n+1)/this.sheetRows;e.uniform4f(this.uTileUV,h,a,g,E),e.drawElements(e.TRIANGLES,this.fieldIndices,e.UNSIGNED_SHORT,0),e.useProgram(this.lineProgram),e.uniformMatrix4fv(this.lineProj,!1,this.projection),e.uniformMatrix4fv(this.lineView,!1,this.view);const u=y();P(u,this.model,[0,.001,0]),e.uniformMatrix4fv(this.lineModel,!1,u),e.bindVertexArray(this.lineVao),e.drawElements(e.TRIANGLES,this.fieldLineMesh.indices.length,e.UNSIGNED_SHORT,0),e.useProgram(this.program),e.bindVertexArray(this.quadVao);const l=1,v=2,c=l/this.sheetCols,p=v/this.sheetRows,d=(l+1)/this.sheetCols,m=(v+1)/this.sheetRows;e.uniform4f(this.uTileUV,c,p,d,m);for(let f=0;f<this.goalPostPositions.length;f++){const[I,B,C]=this.goalPostPositions[f],T=f%4===0||f%4===3?6:10,w=s[0]-I,b=s[2]-C,U=Math.sqrt(w*w+b*b),L=U>50?1.5:U>150?2:1,R=y();P(R,R,[I,B,C]),V(R,R,[L,T,1]),e.uniformMatrix4fv(this.uModel,!1,R),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}e.bindVertexArray(this.quadVao);for(const f of i)f instanceof G?f.render(this):this.renderSprite(f.pos,f.width,f.height,1,0);A.aimTarget.render(this)}}var x,K,$,AA;class CA{constructor(A){O(this,x);this.state={moveX:0,moveZ:0,kick:!1,handpass:!1,aimTarget:null},this.keys={},this.touchMove=null,this.touchAim=null,A.addEventListener("touchstart",S(this,x,K).bind(this),{passive:!1}),A.addEventListener("touchmove",S(this,x,$).bind(this),{passive:!1}),A.addEventListener("touchend",S(this,x,AA).bind(this)),window.addEventListener("keydown",i=>this.keys[i.key.toLowerCase()]=!0),window.addEventListener("keyup",i=>this.keys[i.key.toLowerCase()]=!1)}update(A,i){var s;this.state.moveX=0,this.state.moveZ=0,this.state.kick=!1,this.state.handpass=!1,this.state.aimTarget=null,this.keys.a&&(this.state.moveX-=1),this.keys.d&&(this.state.moveX+=1),this.keys.w&&(this.state.moveZ-=1),this.keys.s&&(this.state.moveZ+=1),this.keys.k&&(this.state.kick=!0),this.keys.j&&(this.state.handpass=!0),this.touchMove&&(this.state.moveX=this.touchMove.dx/50,this.state.moveZ=-this.touchMove.dy/50);const e=(s=navigator.getGamepads)==null?void 0:s.call(navigator)[0];if(e){this.state.moveX+=e.axes[0]||0,this.state.moveZ+=-(e.axes[1]||0);const r=e.axes[2]||0,o=-(e.axes[3]||0),n=Math.hypot(r,o);n>.2&&(this.state.aimTarget=[r/n,o/n]),e.buttons[0].pressed&&(this.state.kick=!0),e.buttons[1].pressed&&(this.state.handpass=!0)}}getState(){return this.state}}x=new WeakSet,K=function(A){for(const i of A.changedTouches)i.clientX<window.innerWidth/2?this.touchMove={id:i.identifier,startX:i.clientX,startY:i.clientY,dx:0,dy:0}:this.touchAim={id:i.identifier,startX:i.clientX,startY:i.clientY,dx:0,dy:0}},$=function(A){for(const i of A.changedTouches)this.touchMove&&i.identifier===this.touchMove.id&&(this.touchMove.dx=i.clientX-this.touchMove.startX,this.touchMove.dy=i.clientY-this.touchMove.startY),this.touchAim&&i.identifier===this.touchAim.id&&(this.touchAim.dx=i.clientX-this.touchAim.startX,this.touchAim.dy=i.clientY-this.touchAim.startY)},AA=function(A){for(const i of A.changedTouches){if(this.touchAim&&i.identifier===this.touchAim.id){const e=this.touchAim.dx,s=-this.touchAim.dy,r=Math.hypot(e,s);r>20&&(this.state.kick=!0,this.state.aimTarget=[e/r,s/r]),this.touchAim=null}this.touchMove&&i.identifier===this.touchMove.id&&(this.touchMove=null)}};class wA{constructor(A,i){if(this.canvas=A,this.gl=A.getContext("webgl2"),!this.gl)throw new Error("WebGL2 not supported");this.renderer=new BA(this.gl,A,i),this.controls=new CA(A),this.entities=[],this.aimTarget=new uA([5,.001,150]),this.player=new EA(_(0,0,170)),this.entities.push(this.player),this.ball=new J(_(0,0,160)),this.entities.push(this.ball),this.player.vel[2]=-5,this.lastTime=performance.now(),requestAnimationFrame(this.loop.bind(this))}start(){requestAnimationFrame(this.loop.bind(this))}loop(A){const i=(A-this.lastTime)/1e3;this.lastTime=A,this.controls.update(i,this);for(const e of this.entities)e.update(i,this);this.renderer.renderScene(this,this.entities),requestAnimationFrame(this.loop.bind(this))}}const MA="data:image/png;base64,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AAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAEAB2AQAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABgEcPROLUXAMAKAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAACwiOFonNoLAGAFAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAABYxHA0Tu0FALACAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAALALgAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtlJS94fDOWhoRsfn8OLG7ANrt7u+bqb3QH3tbh8nCAYCDBNCPgYAVAAMBBwkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgMV9AVUuk4vPADrPAAAAAElFTkSuQmCC";function QA(t){const A=document.getElementById("glcanvas");if(!A)throw console.error("Canvas element not found"),new Error("Canvas element not found");A.width=window.innerWidth,A.height=window.innerHeight,new wA(A,t).start()}pA(MA).then(t=>{if(!t.complete)throw console.error("Failed to load sprite sheet"),new Error("Sprite sheet not loaded");QA(t)});
