(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&e(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();class O{_seed=0;random(){return Math.random()}seed(t){}getRandomInt(t,i=0){return i!=0?t+Math.floor(this.random()*(i-t)):Math.floor(this.random()*t)}getRandomPos(t,i){return[this.getRandomInt(t),this.getRandomInt(i)]}randomRange(t,i){return Math.floor(this.random()*(i-t+1))+t}randomFloat(t=0,i=1){return this.random()*(i-t)+t}shuffle(t){let i,e;for(let s=1;s<t.length;s++)e=this.randomRange(0,s),i=t[s],t[s]=t[e],t[e]=i;return t}choose(t){return t[Math.floor(this.random()*t.length)]}chooseN(t,i){let e=new Array(i),s=t.length,r=new Array(s);if(i>s)throw new RangeError("chooeN: more elements requested than available");for(;i--;){let l=Math.floor(this.random()*s);e[i]=t[l in r?r[l]:l],r[l]=--s in r?r[s]:s}return e}}function q(o,t,i,e){return function(){o>>>=0,t>>>=0,i>>>=0,e>>>=0;var s=o+t|0;return o=t^t>>>9,t=i+(i<<3)|0,i=i<<21|i>>>11,e=e+1|0,s=s+e|0,i=i+s|0,(s>>>0)/4294967296}}class pt extends O{_seed=1;d=3735928559;xorSeed=Math.floor(Date.now())^this.d;random=q(2654435769,608135816,3084996962,this.xorSeed);seed(t){this._seed=t,this.xorSeed=t^this.d,this.random=q(2654435769,608135816,3084996962,this.xorSeed)}}var I=new pt;function wt(o){switch(o){case"Math.random":I=new O;return;case"sfc32":I=new O;return;case"mulberry32":I=new O;return;case"xoshiro128ss":I=new O;return;case"jsf32":I=new O;return;default:throw Error(`Unknown PRNG ${o}`)}}function $(o,t=0){return I.getRandomInt(o,t)}function mt(o,t){return I.getRandomPos(o,t)}function yt(o=0,t=1){return I.randomFloat(o,t)}function bt(o){return I.shuffle(o)}function Y(o){return I.choose(o)}function Ct(o){return I.seed(o)}class w extends Array{constructor(t=[0,0]){super(),this[0]=t[0],this[1]=t[1]}equals(t){return this.length===t.length&&this[0]===t[0]&&this[1]===t[1]}static random(t){return new w(mt(t[0],t[1]))}add(t){return new w([this[0]+t[0],this[1]+t[1]])}sub(t){return new w([this[0]-t[0],this[1]-t[1]])}scale(t){return new w([this[0]*t,this[1]*t])}mul(t){return new w([this[0]*t[0],this[1]*t[1]])}div(t){return new w([this[0]/t[0],this[1]/t[1]])}dot(t){return this[0]*t[0]+this[1]*t[1]}dist(t){return Math.hypot(this[0]-t[0],this[1]-t[1])}abs(){return new w([Math.abs(this[0]),Math.abs(this[1])])}sum(){return this[0]+this[1]}relativeTo(t){return this.sub(t.pos).div(t.size)}absoluteFrom(t){return this.mul(t.size).add(t.pos)}relativeToPS(t,i){return this.sub(t).scale(1/i)}absoluteFromPS(t,i){return this.scale(i).add(t)}set x(t){this[0]=t}set y(t){this[1]=t}get x(){return this[0]}get y(){return this[1]}}class T extends Array{constructor(t=null){if(super(),t===null){this[0]=0,this[1]=0,this[2]=0,this[3]=0;return}this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3]}set x(t){this[0]=t}set y(t){this[1]=t}set w(t){this[2]=t}set h(t){this[3]=t}set pos(t){this[0]=t[0],this[1]=t[1]}set size(t){this[2]=t[2],this[3]=t[3]}get size(){return new w([this[2],this[3]])}get pos(){return new w([this[0],this[1]])}get x(){return this[0]}get y(){return this[1]}get w(){return this[2]}get h(){return this[3]}get right(){return this[0]+this[2]}get bottom(){return this[1]+this[3]}get center_x(){return this[0]+this[2]/2}get center_y(){return this[1]+this[3]/2}get center(){return new w([this.center_x,this.center_y])}grow(t){return new T([this[0]-t,this[1]-t,this[2]+2*t,this[3]+2*t])}get flooredCenter(){return new w([Math.floor(this[0]+this[2]/2),Math.floor(this[1]+this[3]/2)])}translate(t){return new T([this.x+t[0],this.y+t[1],this.w,this.h])}shrinkBorders(t){return new T([this.x+t,this.y+t,this.w-t*2,this.h-t*2])}scaleBorders(t){return new T([this.x+this.w*(1-t)/2,this.y+this.h*(1-t)/2,this.w*t,this.h*t])}mult(t){return new T([this[0]*t,this[1]*t,this[2]*t,this[3]*t])}multXY(t){return new T([this[0]*t[0],this[1]*t[1],this[2]*t[0],this[3]*t[1]])}scale(t,i=!0){if(i){let e=[this[2]*t,this[3]*t];return new T([this[0]+.5*(this[2]-e[0]),this[1]+.5*(this[3]-e[1]),e[0],e[1]])}else{let e=[this[2]*t,this[3]*t];return new T([this[0],this[1],e[0],e[1]])}}collideRadius(t,i=null){let e=[this.center_x-t.center_x,this.center_y-t.center_y];return i===null&&(i=Math.min(this.w,this.h,t.w,t.h)/2),e[0]*e[0]+e[1]*e[1]<i*i}collide(t){return this.x<t.x+t.w&&this.x+this.w>t.x&&this.y<t.y+t.h&&this.h+this.y>t.y}contains(t){return this.x<=t.x&&this.y<=t.y&&this.x+this.w>=t.x+t.w&&this.y+this.h>=t.y+t.h}contact(t){return this.x<=t.x+t.w&&this.x+this.w>=t.x&&this.y<=t.y+t.h&&this.h+this.y>=t.y}contactRadius(t,i=null){let e=[this.center_x-t.center_x,this.center_y-t.center_y];return i===null&&(i=Math.min(this.w,this.h,t.w,t.h)),e[0]*e[0]+e[1]*e[1]<=i*i}}class lt extends Array{constructor(t=[0,0]){super(t[0]*t[1]),this.tileDim=new w(t),this.hidden=!1,this._cacheData=null}get(t){return this[t[0]+t[1]*this.tileDim[0]]}set(t,i){this[t[0]+t[1]*this.tileDim[0]]=i}*iterBetween(t,i,e=0){var s,r,l,h;if([s,r]=t,[l,h]=i,!(Math.abs(h-r)==0&&Math.abs(l-s)==0))if(Math.abs(h-r)>Math.abs(l-s)){var n=(l-s)/(h-r);if(r>h)for(var a=r;a>=h;a--){var u=s+(a-r)*n;yield[u,a]}else for(var a=r;a<=h;a++){var u=s+(a-r)*n;yield[u,a]}}else{var n=(h-r)/(l-s);if(s>l)for(var c=s;c>=l;c--){var f=r+(c-s)*n;yield[c,f]}else for(var c=s;c<=l;c++){var f=r+(c-s)*n;yield[c,f]}}}*iterInBetween(t,i){var e,s,r,l;if([e,s]=t,[r,l]=i,!(Math.abs(l-s)==0&&Math.abs(r-e)==0))if(Math.abs(l-s)>Math.abs(r-e)){var h=(r-e)/(l-s);if(s>l)for(var n=s-1;n>l;n--){var a=Math.round(e+(n-s)*h);yield[a,n]}else for(var n=s+1;n<l;n++){var a=Math.round(e+(n-s)*h);yield[a,n]}}else{var h=(l-s)/(r-e);if(e>r)for(var a=e-1;a>r;a--){var n=Math.round(s+(a-e)*h);yield[a,n]}else for(var a=e+1;a<r;a++){var n=Math.round(s+(a-e)*h);yield[a,n]}}}*iterTypesBetween(t,i,e){for(var s of this.iterBetween(t,i))e.includes(this.get(s))&&(yield s)}*iterTypesInBetween(t,i,e){for(var s of this.iterInBetween(t,i))e.includes(this.get(s))&&(yield s)}hasTypesBetween(t,i,e){for(var s of this.iterTypesBetween(t,i,e))return!0;return!1}hasTypesInBetween(t,i,e){for(var s of this.iterTypesInBetween(t,i,e))return!0;return!1}*iterAll(t=null){const[i,e]=this.tileDim;if(t!==null)for(var s=t[1];s<Math.min(e,t[1]+t[3]);s++)for(var r=t[0];r<Math.min(i,t[0]+t[2]);r++)yield[r,s];else for(var s=0;s<e;s++)for(var r=0;r<i;r++)yield[r,s]}*iterTypes(t,i){for(var e of this.iterAll(i))t.includes(this.get(e))&&(yield e)}*iterAdjacent(t){t=new w(t);for(let i of[[0,-1],[1,0],[0,1],[-1,0]]){const e=t.add(i);e[0]>=0&&e[0]<this.tileDim[0]&&e[1]>=0&&e[1]<this.tileDim[1]&&(yield e)}}hasAdjacent(t,i){for(let e of this.iterAdjacent(t))if(i.includes(this.get(t)))return!0;return!1}*iterInRange(t,i){var e,s;[e,s]=t;const[r,l]=this.tileDim;i==null&&(i=3);for(var h=Math.ceil(i),n=-h;n<h+1;n++)for(var a=-h;a<h+1;a++)if(a*a+n*n<=i*i){var u=e+a,c=s+n;0<=c&&c<l&&0<=u&&u<r&&(yield[u,c])}}*iterTypesInRange(t,i,e,s=null){for(var r of this.iterInRange(t,e))s!==null&&this.hasTypesBetween(t,r,s)||i.includes(this.get(r))&&(yield r)}numInRange(t,i,e,s=null){var r=0;for(var l of this.iterTypesInRange(t,i,e,s))r++;return r}*iterRectBoundary(t){const[i,e]=this.tileDim;let s=Math.min(Math.max(t.x,0),i),r=Math.min(Math.max(t.x+t.w,0),i),l=Math.min(Math.max(t.y,0),e),h=Math.min(Math.max(t.y+t.h,0),e);for(let n=s;n<r;n++)yield[n,l];for(let n=s;n<r;n++)yield[n,h];for(let n=l;n<h;n++)yield[s,n];for(let n=l;n<h;n++)yield[r,n]}*iterRect(t,i=!0){const[e,s]=this.tileDim;if(t instanceof T||(t=new T(t)),i&&(t.x<0||t.y<0||t.right>e||t.bottom>s))return;let r=Math.max(t.x,0),l=Math.min(t.x+t.w,e),h=Math.max(t.y,0),n=Math.min(t.y+t.h,s);for(let a=h;a<n;a++)for(let u=r;u<l;u++)yield[u,a]}numInRect(t,i,e=!0){let s=0;for(var r of this.iterRect(t,e))i.includes(this.get(r))&&s++;return s}}const M=8,Q=48*(1/window.devicePixelRatio||1);function J(o,t,i,e,s,r,l){let h=1;i<M&&(h=1/Q,o.save(),o.scale(h,h)),o.fillStyle=l,o.font=(i>=M?i:Math.ceil(i/h))+"px "+e,r.x;let n=h*o.measureText(t).width;return i<M&&o.restore(),[n,2*i]}function tt(o,t,i,e,s,r,l,h){let n=1;i<M&&(n=1/Q,o.save(),o.scale(n,n)),o.fillStyle=h,o.font=(i>=M?i:Math.ceil(i/n))+"px "+e;let a=l.x,u=o.measureText(t),c=l.y;switch(s){case"left":break;case"center":a+=(l.w-n*u.width)/2;break;case"right":a+=l.w-n*u.width;break}switch(r){case"top":break;case"middle":c+=l.h/2;break;case"bottom":c+=l.h;break}let d={outText:[[t,a/n,c/n]],color:h,fontName:e,size:i,valign:r};return i<M&&o.restore(),d}function Mt(o,t,i=null){let e=1,s=t.size;switch(i==null&&(i=t.color),s<M&&(e=1/Q,o.save(),o.scale(e,e)),t.valign){case"top":o.textBaseline="top";break;case"middle":o.textBaseline="middle";break;case"bottom":o.textBaseline="bottom";break}o.fillStyle=i,o.font=(s>=M?s:Math.ceil(s/e))+"px "+t.fontName;let[r,l,h]=t.outText[0];o.fillText(r,l,h),s<M&&o.restore()}function X(o,t,i,e,s,r,l,h=!0){let n=1;i<M&&(n=1/Q,o.save(),o.scale(n,n)),o.font=(i>=M?i:Math.ceil(i/n))+"px "+e;let a=0,u="",c=Math.min(Math.max(1,Math.ceil(t.length*r.w/o.measureText(t).width/n)),t.length);for(;t!=""||u!="";){if(u==""){let g=t.indexOf(`
`);g>=0?(u=t.slice(0,g),t=t.slice(g+1)):(u=t,t="")}let f=u.slice(0,c),d=n*o.measureText(f).width;if(d>r.w&&c>1)for(;d>r.w&&c>1;)c--,f=u.slice(0,c),d=n*o.measureText(f).width;if(d<r.w&&c<u.length){for(;d<r.w&&c<u.length;)c++,f=u.slice(0,c),d=n*o.measureText(f).width;c--}if(h&&f[-1]!=""&&u[c]!=" "&&u[c]!="	"){let g=Math.max(f.lastIndexOf(" "),f.lastIndexOf("	"));g>=0&&(c-=f.length-g-1)}c=Math.max(1,c),f=u.slice(0,c),u=u.slice(c),h&&(u=u.trimStart()),a+=i}return a+=i,i<M&&o.restore(),[r.w,a]}function et(o,t,i,e,s,r,l,h,n=!0){let a=1;i<M&&(a=1/Q,o.save(),o.scale(a,a)),o.fillStyle=h,o.font=(i>=M?i:Math.ceil(i/a))+"px "+e;let u=l.y,c=[],f="",d=Math.min(Math.max(1,Math.ceil(t.length*(l.w/o.measureText(t).width)/a)),t.length);for(;t!=""||f!="";){if(f==""){let B=t.indexOf(`
`);B>=0?(f=t.slice(0,B),t=t.slice(B+1)):(f=t,t="")}let v=l.x,C=f.slice(0,d),x=a*o.measureText(C).width;if(x>l.w&&d>1)for(;x>l.w&&d>1;)d--,C=f.slice(0,d),x=a*o.measureText(C).width;if(x<l.w&&d<f.length){for(;x<l.w&&d<f.length;)d++,C=f.slice(0,d),x=a*o.measureText(C).width;d--}if(n&&d<f.length&&C[-1]!=""&&f[d]!=" "&&f[d]!="	"){let B=Math.max(C.lastIndexOf(" "),C.lastIndexOf("	"));B>=0&&(d-=C.length-B-1)}switch(d=Math.max(1,d),C=f.slice(0,d),f=f.slice(d),n&&(f=f.trimStart()),x=a*o.measureText(C).width,s){case"left":break;case"center":v+=(l.w-x)/2;break;case"right":v+=l.w-x;break}c.push([C,v/a,u/a]),u+=i}let g=u-l.y,b=0;switch(r){case"top":b=0;break;case"middle":b=(l.h-g)/2+i/2;break;case"bottom":b=l.h-g+i}let y={size:i,fontName:e,outText:c,off:b/a,color:h,valign:r};return i<M&&o.restore(),y}function St(o,t,i=null){let e=1,s=t.size;switch(i===null&&(i=t.color),s<M&&(e=1/Q,o.save(),o.scale(e,e)),t.valign){case"top":o.textBaseline="top";break;case"middle":o.textBaseline="middle";break;case"bottom":o.textBaseline="bottom";break}o.fillStyle=i,o.font=(s>=M?s:Math.ceil(s/e))+"px "+t.fontName;for(let r of t.outText)o.fillText(r[0],r[1],r[2]+(t.off??0));s<M&&o.restore()}const G=(o,t,i)=>Math.min(Math.max(o,t),i);function xt(o,t){return new w(o).dist(t)}function m(o){let t,i,e;return[t,i,e]=new k(o).scale(255).map(s=>Math.floor(s)),"#"+t.toString(16).padStart(2,"0")+i.toString(16).padStart(2,"0")+e.toString(16).padStart(2,"0")}class k extends Array{constructor(...t){t.length==1&&t[0]instanceof Array?super(...t[0]):super(...t)}static asRandomFloats(t,i=0,e=1){let s=new k(t);for(let r=0;r<s.length;r++)s[r]=yt(i,e);return s}sum(){let t=0;return this.forEach(i=>t+=i),t}mean(){return this.sum()/this.length}max(){return Math.max.apply(null,this)}min(){return Math.min.apply(null,this)}vars(){let t=0;return this.forEach(i=>t+=i*i),(t-this.length*this.mean()^2)/(this.length-1)}var(){let t=0;return this.forEach(i=>t+=i*i),t/this.length-this.mean()^2}std(){return Math.sqrt(this.var())}add(t){let i=new k(this);if(t instanceof Array)for(let e=0;e<this.length;e++)i[e]+=t[e];else for(let e=0;e<this.length;e++)i[e]+=t;return i}mul(t){let i=new k(this);if(t instanceof Array)for(let e=0;e<this.length;e++)i[e]*=t[e];else for(let e=0;e<this.length;e++)i[e]*=t;return i}scale(t){const i=Array();for(let e of this)i.push(e*t);return i}dot(t){return this.mul(t).sum()}abs(){return Math.abs.apply(null,this)}lag(t){let i=new k;for(let e=-t;e<this.length-t;e++)e<0||e>=this.length?i.push(NaN):i.push(this[e]);return i}filter(t){return new k(super.filter(t))}dropNaN(){return this.filter(t=>!Number.isNaN(t))}}class z{identifier=-1;pos=[0,0];state="touch_up";device="touch";nativeObject=null;nativeEvent=null;constructor(t={}){for(let i in t)this[i]=t[i]}copy(){return new z({pos:[...this.pos],state:this.state,device:this.device,nativeObject:this.nativeObject,nativeEvent:this.nativeEvent,identifier:this.identifier})}asChildTouch(t){return new z({pos:[...t.toChild(this.pos)],state:this.state,device:this.device,nativeObject:this.nativeObject,nativeEvent:this.nativeEvent,identifier:this.identifier})}get rect(){return new T([...this.pos,0,0])}set x(t){this.pos[0]=t}set y(t){this.pos[1]=t}get x(){return this.pos[0]}get y(){return this.pos[1]}get grabbed(){return A.get().inputHandler.grabbed}grab(t){A.get().inputHandler.grab(t)}ungrab(){A.get().inputHandler.ungrab()}}class Bt{grabbed=null;mouseTouchEmulation=!0;mouseev=null;keyStates={};constructor(t){this.app=t,this.canvas=t.canvas;let i=this.canvas,e=this;document.addEventListener("keydown",function(s){e.process_key(s,"key_down")},!0),document.addEventListener("keyup",function(s){e.process_key(s,"key_up")},!0),i.addEventListener("mousedown",function(s){e.process_mouse(s,"mouse_down")},!0),i.addEventListener("mousemove",function(s){e.process_mouse(s,"mouse_move")},!0),i.addEventListener("mouseout",function(s){e.process_mouse(s,"mouse_cancel")},!0),i.addEventListener("mouseup",function(s){e.process_mouse(s,"mouse_up")},!0),i.addEventListener("touchstart",function(s){e.process_touch(s,"touch_down")},!1),i.addEventListener("touchmove",function(s){e.process_touch(s,"touch_move")},!1),i.addEventListener("touchcancel",function(s){e.process_touch(s,"touch_cancel")},!1),i.addEventListener("touchend",function(s){e.process_touch(s,"touch_up")},!1),i.addEventListener("wheel",function(s){e.process_wheel(s,"wheel")},!0),window.history.replaceState(null,document.title,location.pathname+"#!/backbutton"),window.history.pushState(null,document.title,location.pathname),window.addEventListener("popstate",function(s){e.process_back(s,"back_button")},!1)}grab(t){this.grabbed=t}ungrab(){this.grabbed=null}isKeyUp(t){return t in this.keyStates&&this.keyStates[t]}isKeyDown(t){return t in this.keyStates&&this.keyStates[t]}process_key(t,i){this.app.requestFrameUpdate();const e=this.keyStates[t.key];i==="key_up"?this.keyStates[t.key]=!1:i==="key_down"&&(this.keyStates[t.key]=!0),this.app.emit(i,{states:this.keyStates,oldState:e,event:t})}process_touch(t,i){if(this.app.requestFrameUpdate(),this.grabbed!==null)for(let e of t.changedTouches){let s=this.grabbed.appToChild([e.clientX,e.clientY]),r=new z({pos:s,state:i,nativeObject:e,nativeEvent:t,identifier:e.identifier});this.grabbed.emit(i,r)}else for(let e of t.changedTouches){let s=new z({pos:this.app.toChild([e.clientX,e.clientY]),state:i,nativeObject:e,nativeEvent:t,identifier:e.identifier});this.app.childEmit(i,s,!0)}t.preventDefault()}process_back(t,i){location.hash==="#!/backbutton"&&(history.replaceState(null,document.title,location.pathname),this.app.childEmit("back_button",t))}process_mouse(t,i){if(this.app.requestFrameUpdate(),this.mouseev=t,t.preventDefault(),this.mouseTouchEmulation){let e={mouse_up:"touch_up",mouse_down:"touch_down",mouse_move:"touch_move",mouse_cancel:"touch_cancel"};if(t.buttons!==1&&i!=="mouse_up")return;if(this.grabbed!==null){let s=[t.clientX,t.clientY],r=this.grabbed.appToChild(s),l=new z({pos:r,state:e[i],nativeObject:t,identifier:-1});this.grabbed.emit(e[i],l)}else{let s=new z({pos:this.app.toChild([t.clientX,t.clientY]),state:e[i],nativeObject:t,identifier:-1});this.app.childEmit(e[i],s,!0)}}else this.grabbed!==null?this.grabbed.emit(i,t):this.app.childEmit(i,t,!0)}process_wheel(t,i){if(this.mouseev!=null){if(this.app.requestFrameUpdate(),this.grabbed!=null){let e=this.grabbed.appToChild([this.mouseev.clientX,this.mouseev.clientY]),s=new z({pos:e,state:i,nativeObject:t});return this.grabbed.emit(i,s)}else{let e=new z({pos:this.app.toChild([this.mouseev.clientX,this.mouseev.clientY]),state:i,nativeObject:t});this.app.childEmit(i,e,!0)}t.preventDefault()}}vibrate(t,i,e){window.navigator.vibrate(e)}}function vt(o,t,i,e){if(typeof t=="string"||t instanceof String){if(o.startsWith("on_"))return new Function("resources","parent","root",`return function(event, object, value) {${t}}`).bind(i)(A.resources,i.parent,e);if(t.trim().startsWith("(")&&t.indexOf("=>")<t.indexOf(`
`)){const a=new Function("resources","parent","root",`return ${t}`).bind(i)(A.resources,i.parent,e);return a.markupMethod=!0,a}const s=new Set;let r=0;if(t[0]!=="'"&&t[0]!=='"')for(let a of t.matchAll(/(?!\.)\b([a-z]\w*)\.([a-z_]\w*)\b/ig)){const u=a[1];u!=="this"&&u!=="parent"&&u!=="root"&&s.add(u),r++}if(r===0)return new Function("resources",`return ${t};`)(A.resources);const l=[...s].join(", "),h=`return function (${l}) { return ${t} }`,n=new Function("resources","parent","root",h)(A.resources,i.parent,e).bind(i);return n.text=`(${l}) => ${t}`,n}return t}function ht(o,t,i){const e={},s=o.constructor.name,l={...A.rules.get(s),...t};for(let h in l){const n=l[h];if(h==="children"&&n instanceof Array){const a=[];for(let u of n)if(u instanceof Object&&"cls"in u){const[c,f]=A.classes[u.cls],d=new c;ht(d,u,i),a.push(d)}else throw Error(`Unknown child class ${u} on clsName ${s}`);o instanceof A?o.baseWidget.children=a:o.children=a}else if(h!=="cls")try{e[h]=vt(h,n,o,i)}catch{e[h]=n}}o.updateProperties(e,!1)}class Dt{constructor(t,i=0,e=null){this.elapsed=0,this.timer=t,this.triggered=!1,this.callback=e,i>0&&this.tick(i)}finished(){return this.elapsed>=this.timer}tick(t){return this.elapsed>=this.timer?(this.triggered&&(this.triggered=!1),!1):(this.elapsed+=t,this.elapsed>=this.timer?(this.callback!=null&&this.callback("timer",this),this.triggered=!0,!0):!1)}reset(t=-1,i=0){this.triggered=!1,t>=0&&(this.timer=t),i>0&&this.tick(i)}}class Tt{constructor(){this.rules=new Map}add(t,i,e=!0){let s=this.rules.get(t);if(s&&!e)for(let r in s)s[r]=i[r];else this.rules.set(t,i)}get(t){return this.rules.get(t)??{}}remove(t){return this.rules.delete(t)}}class It{constructor(t,i,e){this.listener=t,this.event=i,this.callback=e}}class Pt{constructor(){this.connections=new Map}bind(t,i,e,s){let r=new It(t,e,s),l=this.connections.get(i);l?l.add(r):this.connections.set(i,new Set([r]))}emit(t,i,e){const s=this.connections.get(t);if(!s)return!1;for(let r of s)if(r.event===i&&r.callback(i,t,e))return!0;return!1}disconnect(t){this.connections.delete(t);for(let i of this.connections.keys()){const e=[],s=this.connections.get(i);if(s){for(let r of s)r.listener===t&&e.push(r);e.forEach(r=>s.delete(r))}}}}class K{stack=[];widget=null;props={};elapsed=0;add(t,i=1e3){this.stack.push([t,i])}update(t,i){if(this.widget===null)return;let e=this.stack[0][0],s=this.stack[0][1];if(this.elapsed==0){this.initProps={};for(let h in e)this.initProps[h]=this.widget[h]}let r=this.elapsed+i-s;this.elapsed=r<0?this.elapsed+i:s;let l=s==0?1:this.elapsed/s;if(r<0)for(let h in this.initProps){let n=e[h];typeof n=="number"&&(this.widget[h]=(1-l)*this.initProps[h]+l*n)}else{for(let h in this.initProps){let n=e[h];typeof n=="number"&&(this.widget[h]=n)}if(this.stack=this.stack.slice(1),this.elapsed=r,this.stack.length==0)this.cancel();else{this.initProps={};for(let h in this.stack[0][0])this.initProps[h]=this.widget[h]}}}start(t){this.widget=t,t._animation=this}cancel(){this.widget!==null&&(this.widget._animation=null,this.widget.emit("animationComplete",this))}}class S extends T{bgColor=null;outlineColor=null;_animation=null;_layoutNotify=!1;hints={};constructor(t=null){return super(),this.parent=null,this._processTouches=!1,this._deferredProps=null,this._children=[],this._needsLayout=!0,t!=null&&this.updateProperties(t),new Proxy(this,{set(i,e,s,r){return["x","y","w","h","children","rect"].includes[e]||e[0]=="_"?Reflect.set(i,e,s,r):(Reflect.set(i,e,s,r),typeof e=="string"&&Reflect.apply(i.emit,r,[e,s]),!0)}})}set rect(t){this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this._needsLayout=!0}get rect(){return new T([this[0],this[1],this[2],this[3]])}deferredProperties(t){let i=this._deferredProps;this._deferredProps=null;for(let e in i)if(!e.startsWith("on_")&&!e.startsWith("_")&&typeof i[e]=="function"){let s=i[e],r,l;[r,l]=(s.text??s.toString()).split("=>"),r=r.replace("(","").replace(")","").split(",").map(u=>u.trim());let h=r.map(u=>t.findById(u)),n={};for(let u of r)n[u]=t.findById(u);const a=/(\w+)\.(\w+)/g;for(let u of l.matchAll(a)){let c,f;if([f,c]=u.slice(1),f==="this")this.bind(c,(d,g,b)=>{try{this[e]=s(...h)}catch(y){console.log("Dynamic binding error",this,e,y)}});else if(f in n)try{n[f].bind(c,(d,g,b)=>{try{this[e]=s(...h)}catch(y){console.log("Dynamic binding error",this,e,y)}})}catch(d){console.log(`Warning: ${f} cannot be bound on`,this,`
property`,e,`
error`,d)}}try{this[e]=s(...h)}catch(u){console.log("Dynamic binding error",this,e,u)}}}updateProperties(t,i=!0){i&&ht(this,{},this);for(let e in t)!e.startsWith("on_")&&!e.startsWith("_")&&typeof t[e]=="function"&&!("markupMethod"in t[e])?this._deferredProps=t:this[e]=t[e]}bind(t,i,e=null){A.get()._eventManager.bind(e,this,t,i)}emit(t,i){return"on_"+t in this&&this["on_"+t](t,this,i)?!0:A.get()._eventManager.emit(this,t,i)}*iter(t=!0,i=!0){if(yield this,!!t)for(let e of this._children)yield*e.iter(...arguments)}*iterParents(){this.parent!==null&&(yield this.parent,this.parent!=A.get()&&(yield*this.parent.iterParents()))}findById(t){for(let i of this.iter(!0,!1))if("id"in i&&i.id==t)return i;return null}*iterByPropertyValue(t,i){for(let e of this.iter(!0,!1))t in e&&e[t]==i&&(yield e)}getTransformRecurse(t=!1,i=null){let e=this!==i&&this.parent!==null?this.parent.getTransformRecurse(!0,i):new DOMMatrix;if(!t)return e;let s=this.getTransform();return s?e.multiply(s):e}getTransform(){return null}applyTransform(t,i=!1,e=!1,s=!1,r=null){let l=e?this.getTransformRecurse(s,r):this.getTransform();if(!l)return t;i&&(l=l.inverse());let h=l.transformPoint(new DOMPoint(t.x,t.y));return new w([h.x,h.y])}appToWidget(t,i=!0){if(this.parent){let e=this.parent.getTransformRecurse().inverse().transformPoint(new DOMPoint(t[0],t[1]));return new w([e.x,e.y])}return t}appToChild(t,i=!0){let e=this.getTransformRecurse().inverse().transformPoint(new DOMPoint(t[0],t[1]));return new w([e.x,e.y])}toChild(t){let i=this.getTransform();if(!i)return t;let e=i.inverse().transformPoint(new DOMPoint(t[0],t[1]));return new w([e.x,e.y])}addChild(t,i=-1){i==-1?this._children.push(t):this._children=[...this._children.slice(0,i),t,...this._children.slice(i)],this.emit("child_added",t),t.parent=this,this._needsLayout=!0}removeChild(t,i=!0){this._children=this.children.filter(e=>e!=t),i&&A.get()._eventManager.disconnect(t),this.emit("child_removed",t),t.parent=null,this._needsLayout=!0}get children(){return this._children}set children(t){for(let i of this._children)this.emit("child_removed",i),i.parent=null,this._needsLayout=!0;this._children=[];for(let i of t)this.addChild(i)}set x(t){this._needsLayout=!0,this[0]=t}set center_x(t){this._needsLayout=!0,this[0]=t-this[2]/2}set right(t){this._needsLayout=!0,this[0]=t-this[2]}set y(t){this._needsLayout=!0,this[1]=t}set center_y(t){this._needsLayout=!0,this[1]=t-this[3]/2}set bottom(t){this._needsLayout=!0,this[1]=t-this[3]}set w(t){this._needsLayout=!0,this[2]=t}set h(t){this._needsLayout=!0,this[3]=t}get x(){return this[0]}get center_x(){return this[0]+this[2]/2}get right(){return this[0]+this[2]}get y(){return this[1]}get center_y(){return this[1]+this[3]/2}get bottom(){return this[1]+this[3]}get w(){return this[2]}get h(){return this[3]}on_wheel(t,i,e){for(let s=this._children.length-1;s>=0;s--)if(this._children[s].emit(t,e))return!0;return!1}on_touch_down(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];for(let h=this._children.length-1;h>=0;h--)if(this._children[h].emit(t,r))return!0}else for(let r=this._children.length-1;r>=0;r--)if(this._children[r].emit(t,e))return!0;return!1}on_touch_up(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];for(let h=this._children.length-1;h>=0;h--)if(this._children[h].emit(t,r))return!0}else for(let r=this._children.length-1;r>=0;r--)if(this._children[r].emit(t,e))return!0;return!1}on_touch_move(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];for(let h=this._children.length-1;h>=0;h--)if(this._children[h].emit(t,r))return!0}else for(let r=this._children.length-1;r>=0;r--)if(this._children[r].emit(t,e))return!0;return!1}on_touch_cancel(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];for(let h=this._children.length-1;h>=0;h--)if(this._children[h].emit(t,r))return!0}else for(let r=this._children.length-1;r>=0;r--)if(this._children[r].emit(t,e))return!0;return!1}on_back_button(t,i,e){return!1}getMetric(t,i,e,s=null,r=null){let l=A.get();if(e===null)return t[i];let h=0,n="relative";for(s=s??this.w,r=r??this.h;;){if(e.constructor==String){let a=e.slice(-2);if(a=="ww"){h=+e.slice(0,-2)*t.w;break}if(a=="wh"){h=+e.slice(0,-2)*t.h;break}if(a=="aw"){h=+e.slice(0,-2)*l.dimW,n="absolute";break}if(a=="ah"){h=+e.slice(0,-2)*l.dimH,n="absolute";break}let u=e.slice(-1);if(u=="w"){h=+e.slice(0,-1)*s;break}if(u=="h"){h=+e.slice(0,-1)*r;break}h=+e;break}if(i=="w"||i=="x"||i=="center_x"||i=="right"){h=+e;break}h=+e;break}return n=="relative"&&(["x","center_x","right"].includes(i)&&(h+=this.x),["y","center_y","bottom"].includes(i)&&(h+=this.y)),h}applyHintMetric(t,i,e,s=null,r=null){let l=A.get();if(e===null)return;let h=0,n="relative";for(s=s??this.w,r=r??this.h;;){if(e.constructor==String){let a=e.slice(-2);if(a=="ww"){h=+e.slice(0,-2)*t.w;break}if(a=="wh"){h=+e.slice(0,-2)*t.h;break}if(a=="aw"){h=+e.slice(0,-2)*l.dimW,n="absolute";break}if(a=="ah"){h=+e.slice(0,-2)*l.dimH,n="absolute";break}let u=e.slice(-1);if(u=="w"){h=+e.slice(0,-1)*s;break}if(u=="h"){h=+e.slice(0,-1)*r;break}h=+e;break}if(i=="w"||i=="x"||i=="center_x"||i=="right"){h=+e*s;break}h=+e*r;break}n=="relative"&&(["x","center_x","right"].includes(i)&&(h+=this.x),["y","center_y","bottom"].includes(i)&&(h+=this.y)),t[i]=h}applyHints(t,i=null,e=null){let s=t.hints;i=i??this.w,e=e??this.h,"w"in s&&s.w!=null&&s.w.constructor==String&&s.w.slice(-2)=="wh"?(s.h!==void 0&&this.applyHintMetric(t,"h",s.h,i,e),s.w!==void 0&&this.applyHintMetric(t,"w",s.w,i,e)):(s.w!==void 0&&this.applyHintMetric(t,"w",s.w,i,e),s.h!==void 0&&this.applyHintMetric(t,"h",s.h,i,e));for(let r in s)r!="w"&&r!="h"&&this.applyHintMetric(t,r,s[r],i,e)}layoutChildren(){this._layoutNotify&&this.emit("layout",null),this._needsLayout=!1;for(let t of this.children)this.applyHints(t),t.layoutChildren()}_draw(t,i,e){this.draw(t,i);let s=this.getTransform();if(s){i.save(),i.transform(s.a,s.b,s.c,s.d,s.e,s.f);for(let r of this._children)r._draw(t,i,e);i.restore();return}for(let r of this._children)r._draw(t,i,e)}draw(t,i){let e=this.rect;if(i.beginPath(),i.rect(e[0],e[1],e[2],e[3]),this.bgColor!=null&&(i.fillStyle=this.bgColor,i.fill()),this.outlineColor!=null){let s=i.lineWidth;i.lineWidth=1/t.tileSize,i.strokeStyle=this.outlineColor,i.stroke(),i.lineWidth=s}}update(t,i){this._deferredProps!=null&&this.deferredProperties(t),this._animation!=null&&(this._animation.update(t,i),t.requestFrameUpdate()),this._needsLayout&&(this.layoutChildren(),t.requestFrameUpdate());for(let e of this._children)e.update(t,i)}}class A extends S{static appInstance=null;static rules=new Tt;static resources=new Map;static classes={};static registerClass(t,i,e){A.classes[t]=[i,e]}constructor(t=null){if(A.appInstance!=null)return A.appInstance;super(),A.appInstance=this,window.app=this,this._eventManager=new Pt,this.id="app",this.w=-1,this.h=-1,this._baseWidget=new S({hints:{x:0,y:0,w:1,h:1}}),this._baseWidget.parent=this,this._modalWidgets=[],this._udpateActive=!0,this.pixelSize=1,this.integerTileSize=!1,this.exactDimensions=!1,this.prefDimW=32,this.prefDimH=16,this.dimW=this.prefDimW,this.dimH=this.prefDimH,this.tileSize=this.getTileScale()*this.pixelSize,this.canvasName="canvas",this.canvas=null,this.offsetX=0,this.offsetY=0,this.shakeX=0,this.shakeY=0,this.shakeAmount=0,this.timer_tick=null,this.timers=[],this.continuousFrameUpdates=!1,this._requestedFrameUpdate=!1,t&&this.updateProperties(t)}get baseWidget(){return this._baseWidget}addTimer(t,i){let e=new Dt(t,0,i);return this.timers.push(e),e}removeTimer(t){this.timers=this.timers.filter(i=>i!=t)}addModal(t){this._modalWidgets.push(t),this._needsLayout=!0}removeModal(t){this._modalWidgets=this._modalWidgets.filter(i=>i!=t)}static get(){return A.appInstance||(A.appInstance=new A),A.appInstance}start(){let t=this;this.setupCanvas(),this.inputHandler=new Bt(this),window.onresize=()=>t.updateWindowSize(),this.updateWindowSize(),window.onload=()=>this._start()}_start(){this.update()}childEmit(t,i,e=!1){if(e&&this._modalWidgets.length>0)return this._modalWidgets[this._modalWidgets.length-1].emit(t,i);if(this._baseWidget.emit(t,i))return!0;for(let s of this._modalWidgets)if(s.emit(t,i))return!0;return!1}*iter(t=!0,i=!0){yield this,yield*this._baseWidget.iter(...arguments);for(let e of this._modalWidgets)yield*e.iter(...arguments)}findById(t){for(let i of this.iter(!0,!1))if("id"in i&&i.id==t)return i;return null}*iterByPropertyValue(t,i){for(let e of this.iter(!0,!1))t in e&&e[t]===i&&(yield e)}update(){this._udpateActive=!0,this._requestedFrameUpdate=!1;let t=15,i=Date.now();this.timer_tick!=null&&(t=Math.min(i-this.timer_tick,30)),(this.timers.length>0||this._needsLayout)&&this.requestFrameUpdate();for(let e of this.timers)e.tick(t);this._needsLayout&&this.layoutChildren();for(let e of A.resources.values())e.update(this,t);this._baseWidget.update(this,t);for(let e of this._modalWidgets)e.update(this,t);this.ctx&&this._draw(this,this.ctx,t),this.continuousFrameUpdates&&this.requestFrameUpdate(),this.timer_tick=i,this._requestedFrameUpdate&&window.requestAnimationFrame(()=>this.update()),this._udpateActive=!1}requestFrameUpdate(){this._requestedFrameUpdate||(this._udpateActive?this._requestedFrameUpdate=!0:window.requestAnimationFrame(()=>this.update()))}_draw(t,i,e){if(!this.canvas)return;i.clearRect(0,0,this.canvas.width,this.canvas.height),this.shakeX=0,this.shakeY=0,this.screenShake(),i.save();let s=this.getTransform();s&&i.transform(s.a,s.b,s.c,s.d,s.e,s.f),this._baseWidget._draw(t,i,e);for(let r of this._modalWidgets)r._draw(t,i,e);i.restore()}getTransform(t=!0){return new DOMMatrix().translate(this.offsetX+this.shakeX,this.offsetY+this.shakeY).scale(this.tileSize,this.tileSize)}on_prefDimW(t,i,e){this.updateWindowSize()}on_prefDimH(t,i,e){this.updateWindowSize()}on_tileSize(t,i,e){this.prefDimH<0&&this.prefDimW<0&&this.updateWindowSize()}updateWindowSize(){this.x=0,this.y=0,this.w=window.innerWidth,this.h=window.innerHeight,this.prefDimH>=0&&this.prefDimW>=0&&(this.tileSize=this.getTileScale()),this.fitDimensionsToTileSize(this.tileSize),this.setupCanvas();try{screen.orientation.unlock()}catch{}this._needsLayout=!0,this.requestFrameUpdate()}getTileScale(){let t=this.h,i=this.w,e=1/this.pixelSize;return this.prefDimW<0&&this.prefDimH<0?this.tileSize>0&&(e=this.tileSize/this.pixelSize):this.prefDimW<0?e=t/this.prefDimH/this.pixelSize:this.prefDimH<0?e=i/this.prefDimW/this.pixelSize:e=Math.min(t/this.prefDimH/this.pixelSize,i/this.prefDimW/this.pixelSize),this.integerTileSize&&e>1&&(e=Math.floor(e)),e*this.pixelSize}fitDimensionsToTileSize(t){let i=this.h,e=this.w;if(this.exactDimensions){this.prefDimW<0&&this.prefDimH<0?(this.dimW=e/this.tileSize,this.dimH=i/this.tileSize):this.prefDimH<0?(this.dimW=this.prefDimW,this.dimH=i/this.tileSize):this.prefDimW<0?(this.dimW=e/this.tileSize,this.dimH=this.prefDimH):(this.dimH=this.prefDimH,this.dimW=this.prefDimW);return}this.dimH=Math.floor(i/t),this.dimW=Math.floor(e/t)}setupCanvas(){this.canvas=document.querySelector(this.canvasName),this.canvas&&(this.canvas.width=this.w,this.canvas.height=this.h,this.ctx=this.canvas.getContext("2d"),this.ctx&&(this.ctx.imageSmoothingEnabled=!1,this.offsetX=Math.floor((this.w-this.tileSize*this.dimW)/2),this.offsetY=Math.floor((this.h-this.tileSize*this.dimH)/2)))}applyHints(t){super.applyHints(t,this.dimW,this.dimH)}screenShake(){this.shakeAmount&&this.shakeAmount--;let t=Math.random()*Math.PI*2;this.shakeX=Math.round(Math.cos(t)*this.shakeAmount),this.shakeY=Math.round(Math.sin(t)*this.shakeAmount)}layoutChildren(){this._layoutNotify&&this.emit("layout",null),this._needsLayout=!1,this.applyHints(this._baseWidget),this._baseWidget.layoutChildren();for(let t of this._modalWidgets)this.applyHints(t),t.layoutChildren()}}class L extends S{fontSize=null;sizeGroup="";clip=!1;ignoreSizeForGroup=!1;fontName='"Nimbus Mono PS", "Courier New", monospace';text="";wrap=!1;wrapAtWord=!0;align="center";valign="middle";color="white";constructor(t=null){super(),this._textData=null,t!==null&&this.updateProperties(t)}on_align(t,i,e){this._needsLayout=!0}on_valign(t,i,e){this._needsLayout=!0}on_wrap(t,i,e){this._needsLayout=!0}on_wrapAtWord(t,i,e){this._needsLayout=!0}on_text(t,i,e){this._needsLayout=!0}on_fontSize(t,i,e){this._needsLayout=!0}on_fontName(t,i,e){this._needsLayout=!0}layoutChildren(){let i=A.get().ctx;if(!i)return;let e=this.fontSize===null?null:this.getMetric(this,"fontSize",this.fontSize);if("h"in this.hints&&this.hints.h==null&&e!==null&&(this[3]=this.wrap?X(i,this.text,e,this.fontName,this.align=="center",this.rect,this.color,this.wrapAtWord)[1]:J(i,this.text,e,this.fontName,this.align=="center",this.rect,this.color)[1]),"w"in this.hints&&this.hints.w==null&&e!==null&&(this[2]=this.wrap?X(i,this.text,e,this.fontName,this.align=="center",this.rect,this.color,this.wrapAtWord)[0]:J(i,this.text,e,this.fontName,this.align=="center",this.rect,this.color)[0]),e=e===null?this.h/2:e,this.fontSize===null&&this.rect.w!==void 0){let s=0,r,l;for(;s<50;){if(this.wrap?[r,l]=X(i,this.text,e,this.fontName,this.align=="center",this.rect,this.color,this.wrapAtWord):[r,l]=J(i,this.text,e,this.fontName,this.align=="center",this.rect,this.color),(this.h>=l||"h"in this.hints&&this.hints.h==null||e<.01)&&(this.w>=r||"w"in this.hints&&this.hints.w==null)){"h"in this.hints&&this.hints.h==null&&(this.h=l),"w"in this.hints&&this.hints.w==null&&(this.w=r);break}const h=Math.min(1.1,this.w/r,this.h/l);this.wrap?e*=h**.5:e*=h**1.1,s++}e===void 0&&(e=.001*A.get().h)}this.sizeGroup!==""?(this._bestFontSize=e,this._textData=null):this.wrap?this._textData=et(i,this.text,e,this.fontName,this.align,this.valign,this.rect,this.color,this.wrapAtWord):this._textData=tt(i,this.text,e,this.fontName,this.align,this.valign,this.rect,this.color),super.layoutChildren()}sizeToGroup(t){if(this._bestFontSize===void 0)return;let i=1/0;for(let e of A.get().iterByPropertyValue("sizeGroup",this.sizeGroup))i>e._bestFontSize&&!e.ignoreSizeForGroup&&(i=e._bestFontSize);if(i>0)for(let e of A.get().iterByPropertyValue("sizeGroup",this.sizeGroup)){const s=e.clip||!e.ignoreSizeForGroup?i:e._bestFontSize;e.wrap?e._textData=et(t,e.text,s,e.fontName,e.align,e.valign,e.rect,e.color,e.wrapAtWord):e._textData=tt(t,e.text,s,e.fontName,e.align,e.valign,e.rect,e.color)}}draw(t,i){if(super.draw(t,i),this.clip){i.save();const e=this.rect;i.rect(e.x,e.y,e.w,e.h),i.clip()}!this._textData&&this.sizeGroup!==""&&this.sizeToGroup(i),this._textData&&(this.wrap?St(i,this._textData,this.color):Mt(i,this._textData,this.color)),this.clip&&i.restore()}}class zt extends L{bgColor=m([.5,.5,.5]);selectColor=m([.7,.7,.8]);disableColor1=m([.2,.2,.2]);disableColor2=m([.4,.4,.4]);disable=!1;constructor(t=null){super(),t!==null&&this.updateProperties(t)}on_touch_down(t,i,e){return super.on_touch_down(t,i,e)?!0:!this.disable&&this.collide(e.rect)?(e.grab(this),this._touching=!0,!0):!1}on_touch_up(t,i,e){return super.on_touch_up(t,i,e)?!0:e.grabbed!=this?!1:(e.ungrab(),!this.disable&&this.collide(e.rect)?(this._touching=!1,this.emit("press",null),!0):!1)}on_touch_move(t,i,e){return super.on_touch_move(t,i,e)?!0:(e.grabbed==this&&!this.disable&&(this._touching=this.collide(e.rect)),!1)}draw(t,i){let e=this.bgColor,s=this.color;this._touching&&(this.bgColor=this.selectColor),this.disable&&(this.bgColor=this.disableColor1,this.color=this.disableColor2),super.draw(t,i),this.bgColor=e,this.color=s}}class Yt extends S{color=m([.8,.8,.8]);bgColor=m([.5,.5,.5]);selectColor=m([.7,.7,.8]);disableColor1=m([.2,.2,.2]);disableColor2=m([.4,.4,.4]);disable=!1;constructor(t=null){super(),t!==null&&this.updateProperties(t)}on_touch_down(t,i,e){return super.on_touch_down(t,i,e)?!0:!this.disable&&this.collide(e.rect)?(e.grab(this),this._touching=!0,!0):!1}on_touch_up(t,i,e){return super.on_touch_up(t,i,e)?!0:e.grabbed!=this?!1:(e.ungrab(),!this.disable&&this.collide(e.rect)?(this._touching=!1,this.emit("press",null),!0):!1)}on_touch_move(t,i,e){return super.on_touch_move(t,i,e)?!0:(e.grabbed==this&&!this.disable&&(this._touching=this.collide(e.rect)),!1)}draw(t,i){let e=this.bgColor,s=this.color;this._touching&&(this.bgColor=this.selectColor),this.disable&&(this.bgColor=this.disableColor1,this.color=this.disableColor2),super.draw(t,i),this.bgColor=e,this.color=s}}class nt extends L{bgColor=m([.5,.5,.5]);pressColor=m([.7,.7,.7]);selectColor=m([.7,.7,.8]);disableColor1=m([.2,.2,.2]);disableColor2=m([.4,.4,.4]);disable=!1;_press=!1;group=null;singleSelect=!0;constructor(t=null){super(),t!==null&&this.updateProperties(t)}get press(){return this._press}set press(t){this._press=t}on_touch_down(t,i,e){return super.on_touch_down(t,i,e)?!0:!this.disable&&this.collide(e.rect)?(e.grab(this),this._touching=!0,!0):!1}on_touch_up(t,i,e){if(e.grabbed!==this)return!1;if(e.ungrab(),this._touching=!1,this.collide(e.rect)){if(this.group===null||!this.singleSelect)this.press=!this.press;else{if(this.parent!==null)for(let s of this.parent.iterByPropertyValue("group",this.group))s!==this&&(s._press=!1);this.press=!0}return!0}return!1}on_touch_move(t,i,e){return e.grabbed===this?(this._touching=this.collide(e.rect),!0):!1}draw(t,i){let e=this.bgColor,s=this.color;this.press&&(this.bgColor=this.pressColor),this._touching&&(this.bgColor=this.selectColor),this.disable&&(this.bgColor=this.disableColor1,this.color=this.disableColor2),super.draw(t,i),this.bgColor=e,this.color=s}}class kt extends S{selectColor=m([.7,.7,.8]);color=m([.6,.6,.6]);bgColor=m([.5,.5,.5]);disableColor1=m([.2,.2,.2]);disableColor2=m([.3,.3,.3]);disable=!1;check=!1;group=null;constructor(t=null){super(),t!==null&&this.updateProperties(t)}on_touch_down(t,i,e){return super.on_touch_down(t,i,e)?!0:!this.disable&&this.collide(e.rect)?(e.grab(this),this._touching=!0,!0):!1}on_touch_up(t,i,e){if(super.on_touch_up(t,i,e))return!0;if(this.parent===null||e.grabbed!=this)return!1;if(e.ungrab(),!this.disable&&this.collide(e.rect)){if(this._touching=!1,this.group==null)this.check=!this.check;else{for(let s of this.parent.iterByPropertyValue("group",this.group))s!=this&&(s.check=!1);this.check=!0}return!0}return!1}on_touch_move(t,i,e){return super.on_touch_move(t,i,e)?!0:e.grabbed==this&&!this.disable?(this._touching=this.collide(e.rect),!0):!1}draw(t,i){if(this.group!=null){let r=this.rect;r.w=r.h=.5*Math.min(r.w,r.h),r.x=this.x+(this.w-r.w)/2,r.y=this.y+(this.h-r.h)/2;let l=A.get().tileSize,h=A.get().ctx;if(!h)return;h.strokeStyle=this.disable?this.disableColor1:this.bgColor,h.lineWidth=1/l,h.beginPath(),h.arc(r.center_x,r.center_y,r.w/2,0,2*Math.PI),h.stroke(),(this._touching||this.disable)&&(h.fillStyle=this.disable?this.disableColor1:this.selectColor,h.fill()),this.check&&(h.fillStyle=this.disable?this.disableColor2:this.color,h.beginPath(),h.arc(r.center_x,r.center_y,r.w/3,0,2*Math.PI),h.fill());return}let e=this.rect;e.w=e.h=.5*Math.min(e.w,e.h),e.x=this.x+(this.w-e.w)/2,e.y=this.y+(this.h-e.h)/2;let s=t.tileSize;i.beginPath(),i.strokeStyle=this.bgColor,this.disable&&(i.strokeStyle=this.disableColor1),i.lineWidth=1/s,i.rect(e[0],e[1],e[2],e[3]),i.stroke(),this._touching&&(i.fillStyle=this.selectColor,i.fill()),this.check&&(i.strokeStyle=this.color,this.disable&&(i.strokeStyle=this.disableColor2),i.beginPath(),i.lineWidth=e.w/5,i.moveTo(e.x,e.y),i.lineTo(e.right,e.bottom),i.moveTo(e.right,e.y),i.lineTo(e.x,e.bottom),i.stroke())}}class Lt extends S{selectColor=m([.7,.7,.8]);color=m([.6,.6,.6]);bgColor=m([.4,.4,.4]);disableColor1=m([.2,.2,.2]);disableColor2=m([.3,.3,.3]);disable=!1;min=0;max=1;curMax=1;unboundedStopMultiple=10;exponentialSlider=!1;step=null;orientation="horizontal";value=0;sliderSize=.2;constructor(t=null){super(),t!==null&&this.updateProperties(t)}setValue(t){let i=this.max??this.curMax,e=0;this.orientation=="horizontal"&&(e=G((t.rect.x-this.x-this.w*this.sliderSize/2)/(this.w*(1-this.sliderSize)),0,1)),this.orientation=="vertical"&&(e=G((t.rect.y-this.y-this.h*this.sliderSize/2)/(this.h*(1-this.sliderSize)),0,1)),this.max===null&&this.curMax/this.unboundedStopMultiple>this.min?e=e>.5?i/this.unboundedStopMultiple+(e-.5)/.5*(i-i/this.unboundedStopMultiple):this.min+e/.5*(i/this.unboundedStopMultiple-this.min):e=this.min+(i-this.min)*e,this.step!=null&&(e=Math.round(e/this.step)*this.step),this.value=e}on_touch_down(t,i,e){return super.on_touch_down(t,i,e)?!0:!this.disable&&this.collide(e.rect)?(e.grab(this),this._touch=!0,this.setValue(e),!0):!1}updateMax(){this.max===null&&(this.curMax=this.unboundedStopMultiple*this.value)}on_touch_up(t,i,e){return e.grabbed!=this?super.on_touch_up(t,i,e):(e.ungrab(),!this.disable&&this.collide(e.rect)&&(this._touching=!1,this.setValue(e)),this.updateMax(),!0)}on_touch_move(t,i,e){return e.grabbed!==this?super.on_touch_move(t,i,e):(this.disable||(this._touching=this.collide(e.rect),this.setValue(e)),!1)}draw(t,i){let e=t.tileSize,s=this.rect;if(this.orientation=="horizontal"){s.w-=this.sliderSize*this.w,s.x+=this.sliderSize/2*this.w;let r=Math.min(this.sliderSize/2*this.w,this.h/2)/2;i.strokeStyle=this.disable?this.disableColor1:this.bgColor,i.beginPath(),i.lineWidth=4/e,i.moveTo(s.x,s.center_y),i.lineTo(s.right,s.center_y),i.stroke();let l=this.max??this.curMax,h;this.max===null&&this.curMax/this.unboundedStopMultiple>this.min?h=this.value>l/this.unboundedStopMultiple?(.5+.5*(this.value-l/this.unboundedStopMultiple)/(l-l/this.unboundedStopMultiple))*s.w:.5*(this.value-this.min)/(l/this.unboundedStopMultiple-this.min)*s.w:h=(this.value-this.min)/(l-this.min)*s.w,i.strokeStyle=this.disable?this.disableColor2:this.bgColor,i.beginPath(),i.arc(s.x+h,s.center_y,r,0,2*Math.PI),i.stroke(),i.fillStyle=this.color,(this._touching||this.disable)&&(i.fillStyle=this.disable?this.disableColor1:this.selectColor),i.fill()}if(this.orientation=="vertical"){s.h-=this.sliderSize*this.h,s.y+=this.sliderSize/2*this.h;let r=Math.min(this.sliderSize/2*this.h,this.w/2)/2;i.strokeStyle=this.disable?this.disableColor1:this.bgColor,i.beginPath(),i.lineWidth=4/e,i.moveTo(s.center_x,s.y),i.lineTo(s.center_x,s.bottom),i.stroke();let l=this.max??this.curMax,h;this.max===null&&this.curMax/this.unboundedStopMultiple>this.min?h=this.value>l/this.unboundedStopMultiple?(.5+.5*(this.value-l/this.unboundedStopMultiple)/(l-l/this.unboundedStopMultiple))*s.h:.5*(this.value-this.min)/(l/this.unboundedStopMultiple-this.min)*s.h:h=(this.value-this.min)/(l-this.min)*s.h,i.strokeStyle=this.disable?this.disableColor2:this.bgColor,i.beginPath(),i.arc(s.center_x,s.y+h,r,0,2*Math.PI),i.stroke(),i.fillStyle=this.color,(this._touching||this.disable)&&(i.fillStyle=this.disable?this.disableColor1:this.selectColor),i.fill()}}}class Et extends L{_activeDOMInput=null;focus=!0;disable=!1;_inputSanitizer=void 0;constructor(t={}){super(),this._textData=null,t!==null&&this.updateProperties(t)}on_touch_down(t,i,e){return super.on_touch_down(t,i,e)?!0:!this.disable&&this.collide(e.rect)?(e.grab(this),this._touching=!0,!0):(this.clearDOM(),!1)}on_touch_up(t,i,e){return super.on_touch_up(t,i,e)?!0:e.grabbed!=this?!1:!this.disable&&this.collide(e.rect)?(this._touching=!1,this.addDOMInput(),!0):(this.clearDOM(),!1)}on_layout(t,i,e){this.clearDOM()}DOMInputRect(){let t=this.rect,i=this.getTransformRecurse(),e=new T,s=i.transformPoint(new DOMPoint(t.x,t.y)),r=i.transformPoint(new DOMPoint(t.right,t.bottom));return[e.x,e.y]=[s.x,s.y],[e.w,e.h]=[r.x,r.y],e.w-=e.x,e.h-=e.y,e}addDOMInput(){if(!this._textData)return;A.get();let t=document.getElementById("eskvapp");if(!t)return;let i=this.wrap?"textarea":"input",e=document.createElement(i);if(!(e instanceof HTMLInputElement)&&!(e instanceof HTMLTextAreaElement))return;let s,r=this.DOMInputRect(),l=this.color!=null?this.color:"white",h=this.bgColor!=null?this.bgColor:"black";e.style.color=l,s=this._textData.size/this.h*r.h/this._textData.outText.length,i=="textarea"&&this._textData.outText.length,e.value=this.text,s=(Math.floor(s*100)/100).toString()+"px",e.style.fontSize=s,e.style.backgroundColor=h,e.style.top=(Math.floor(r.y*100)/100).toString()+"px",e.style.left=(Math.floor(r.x*100)/100).toString()+"px",e.style.width=(Math.floor(r.w*100)/100).toString()+"px",e.style.height=(Math.floor(r.h*100)/100).toString()+"px",e.style.fontFamily=this.fontName,this._activeDOMInput=e,t.appendChild(e),e.addEventListener("focusout",n=>this.clearDOM()),e.focus(),e.select(),this.focus=!0}clearDOM(){if(this._activeDOMInput!=null){this.text=this._inputSanitizer?this._inputSanitizer(this._activeDOMInput.value,this):this._activeDOMInput.value;let t=this._activeDOMInput;this._activeDOMInput=null,t.remove(),this.focus=!1,this._needsLayout=!0;let i=A.get().inputHandler;i?.grabbed===this&&i.ungrab()}}layoutChildren(){if(super.layoutChildren(),this._activeDOMInput!=null){let t=this.DOMInputRect(),i=this._activeDOMInput;i.style.top=(Math.floor(t.y*100)/100).toString()+"px",i.style.left=(Math.floor(t.x*100)/100).toString()+"px",i.style.width=(Math.floor(t.w*100)/100).toString()+"px",i.style.height=(Math.floor(t.h*100)/100).toString()+"px"}}}class Z extends S{bgColor=null;outlineColor=null;src=null;lockAspect=!0;scaleToFit=!0;antiAlias=!0;angle=0;anchor="center";mirror=!1;constructor(t=null){super(),this.image=new Image,t!==null&&this.updateProperties(t),this.src&&(this.image.src=this.src)}on_src(t,i,e){this.src?this.image.src=this.src:this.image.src=""}layoutChildren(){this._layoutNotify&&this.emit("layout",null);let t=A.get();"w"in this.hints&&this.hints.w==null&&(this[2]=this.image.width/t.tileSize),"h"in this.hints&&this.hints.h==null&&(this[3]=this.image.height/t.tileSize),this._needsLayout=!1,super.layoutChildren()}draw(t,i){if(super.draw(t,i),!this.image.complete||this.image.naturalHeight==0)return;let e=1-2*(this.mirror?1:0),s=this.rect;if(this.scaleToFit||(s.x+=s.w/2-this.image.width/2/t.tileSize,s.y+=s.h/2-this.image.height/2/t.tileSize,s.w=this.image.width/t.tileSize,s.h=this.image.height/t.tileSize),this.lockAspect){let l=this.image.height/this.image.width,h=s.h/s.w,n=s.h,a=s.w;l<h&&(n=s.w*l),l>h&&(a=s.h/l),s.x+=s.w/2-a/2,s.y+=s.h/2-n/2,s.w=a,s.h=n}i.save(),i.imageSmoothingEnabled=this.antiAlias;let r=this.anchor;r=="center"?r=[s.w/2,s.h/2]:r=[r[0]*s.w,r[1]*s.h],i.translate(s.x+r[0],s.y+r[1]),this.angle!=0&&i.rotate(this.angle),e&&i.scale(-1,1),i.translate(-r[0],-r[1]),i.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,s.w,s.h),i.restore()}}class W extends S{spacingX=0;spacingY=0;paddingX=0;paddingY=0;orientation="vertical";order="forward";constructor(t=null){super(),t!==null&&this.updateProperties(t)}*iterChildren(){if(this.order==="forward")for(let t of this._children)yield t;else for(let t=this._children.length-1;t>=0;t--)yield this._children[t]}on_numX(t,i,e){this._needsLayout=!0}on_numY(t,i,e){this._needsLayout=!0}on_spacingX(t,i,e){this._needsLayout=!0}on_spacingY(t,i,e){this._needsLayout=!0}on_paddingX(t,i,e){this._needsLayout=!0}on_paddingY(t,i,e){this._needsLayout=!0}on_orientation(t,i,e){this._needsLayout=!0}layoutChildren(){this._layoutNotify&&this.emit("layout",null),this._needsLayout=!1;let t=this.getMetric(this,"spacingX",this.spacingX),i=this.getMetric(this,"spacingY",this.spacingY),e=this.getMetric(this,"paddingX",this.paddingX),s=this.getMetric(this,"paddingY",this.paddingY);if(this.orientation==="vertical"){let r=this.children.length,l=this.h-i*(r-1)-2*s,h=this.w-2*e,n=0;for(let d of this.iterChildren())d.w=h,this.applyHints(d,h,l),"h"in d.hints&&(d.hints.h===null&&d.layoutChildren(),n+=d.h,r--);let a=(l-n)/r,u=h;r===0&&l>0&&(s=(l-n)/2);let c=this.y+s,f=this.x+e;for(let d of this.iterChildren())d.y=c,!("x"in d.hints)&&!("center_x"in d.hints)&&!("right"in d.hints)&&(d.x=f),"w"in d.hints||(d.w=u),"h"in d.hints||(d.h=a),d.layoutChildren(),c+=i+d.h;r===0&&"h"in this.hints&&this.hints.h===null&&(this[3]=c+s-this.y);return}if(this.orientation==="horizontal"){let r=this.children.length,l=this.h-2*s,h=this.w-t*(r-1)-2*e,n=0;for(let d of this.iterChildren())d.h=l,this.applyHints(d,h,l),"w"in d.hints&&(d.hints.w===null&&d.layoutChildren(),n+=d.w,r--);let a=l,u=(h-n)/r;r===0&&h>0&&(e=(h-n)/2);let c=this.y+s,f=this.x+e;for(let d of this.iterChildren())d.x=f,!("y"in d.hints)&&!("center_y"in d.hints)&&!("bottom"in d.hints)&&(d.y=c),"w"in d.hints||(d.w=u),"h"in d.hints||(d.h=a),d.layoutChildren(),f+=t+d.w;r==0&&"w"in this.hints&&this.hints.w==null&&(this[2]=f+e-this.x)}}}class ot extends S{activePage=0;constructor(t=null){super(),t!==null&&this.updateProperties(t)}on_wheel(t,i,e){const s=this.children[this.activePage]??void 0;return!!(s!==void 0&&s.emit(t,e))}on_touch_down(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];const h=this.children[this.activePage]??void 0;if(h!==void 0&&h.emit(t,r))return!0}else{const r=this.children[this.activePage]??void 0;if(r!==void 0&&r.emit(t,e))return!0}return!1}on_touch_up(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];const h=this.children[this.activePage]??void 0;if(h!==void 0&&h.emit(t,r))return!0}else{const r=this.children[this.activePage]??void 0;if(r!==void 0&&r.emit(t,e))return!0}return!1}on_touch_move(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];const h=this.children[this.activePage]??void 0;if(h!==void 0&&h.emit(t,r))return!0}else{const r=this.children[this.activePage]??void 0;if(r!==void 0&&r.emit(t,e))return!0}return!1}on_touch_cancel(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];const h=this.children[this.activePage]??void 0;if(h!==void 0&&h.emit(t,r))return!0}else{const r=this.children[this.activePage]??void 0;if(r!==void 0&&r.emit(t,e))return!0}return!1}on_activePage(t,i,e){this._needsLayout=!0}_draw(t,i,e){this.draw(t,i);let s=this.getTransform();if(s){i.save(),i.transform(s.a,s.b,s.c,s.d,s.e,s.f);let l=this.children[this.activePage]??void 0;l!==void 0&&l._draw(t,i,e),i.restore();return}let r=this.children[this.activePage]??void 0;r!==void 0&&r._draw(t,i,e)}}class _t extends ot{tabHeightHint="1";tabGroupName="tabbedNotebookGroup";constructor(t=null){super(),this.buttonBox=new W({orientation:"horizontal",hints:{h:this.tabHeightHint,w:null}}),this.buttonScroller=new at({id:"_scrollview",hints:{h:this.tabHeightHint,w:1},children:[this.buttonBox]}),this._children=[this.buttonScroller],this.buttonScroller.parent=this,t!==null&&this.updateProperties(t),this.updateButtons()}on_tabHeightHint(t,i,e){this.buttonBox.hints.h=this.tabHeightHint}on_child_added(t,i,e){this.updateButtons()}on_child_removed(t,i,e){this.updateButtons()}on_wheel(t,i,e){const s=this._children[0]??void 0;if(s!==void 0&&s.emit(t,e))return!0;const r=this.children[this.activePage]??void 0;return!!(r!==void 0&&r.emit(t,e))}on_touch_down(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];const h=this._children[0]??void 0;if(h!==void 0&&h.emit(t,r))return!0;const n=this.children[this.activePage]??void 0;if(n!==void 0&&n.emit(t,r))return!0}else{const r=this._children[0]??void 0;if(r!==void 0&&r.emit(t,e))return!0;const l=this.children[this.activePage]??void 0;if(l!==void 0&&l.emit(t,e))return!0}return!1}on_touch_up(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];const h=this._children[0]??void 0;if(h!==void 0&&h.emit(t,r))return!0;const n=this.children[this.activePage]??void 0;if(n!==void 0&&n.emit(t,r))return!0}else{const r=this._children[0]??void 0;if(r!==void 0&&r.emit(t,e))return!0;const l=this.children[this.activePage]??void 0;if(l!==void 0&&l.emit(t,e))return!0}return!1}on_touch_move(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];const h=this._children[0]??void 0;if(h!==void 0&&h.emit(t,r))return!0;const n=this.children[this.activePage]??void 0;if(n!==void 0&&n.emit(t,r))return!0}else{const r=this._children[0]??void 0;if(r!==void 0&&r.emit(t,e))return!0;const l=this.children[this.activePage]??void 0;if(l!==void 0&&l.emit(t,e))return!0}return!1}on_touch_cancel(t,i,e){let s=this.getTransform();if(s){let r=e.copy(),l=s.inverse().transformPoint(new DOMPoint(r.pos[0],r.pos[1]));r.pos=[l.x,l.y];const h=this._children[0]??void 0;if(h!==void 0&&h.emit(t,r))return!0;const n=this.children[this.activePage]??void 0;if(n!==void 0&&n.emit(t,r))return!0}else{const r=this._children[0]??void 0;if(r!==void 0&&r.emit(t,e))return!0;const l=this.children[this.activePage]??void 0;if(l!==void 0&&l.emit(t,e))return!0}return!1}get children(){return this._children.slice(1)}set children(t){for(let i of this._children.slice(1))this.emit("child_removed",i),i.parent=null,this._needsLayout=!0,this.updateButtons();this._children=this._children.slice(0,1);for(let i of t)this.addChild(i)}updateButtons(){this.buttonBox.children=[];let t=0;for(let i of this.children){const e=new nt({text:i.name??String(t+1),group:this.tabGroupName,singleSelect:!0,press:this.activePage===t,fontSize:"0.5",hints:{h:null,w:null}});e.bind("press",(s,r,l)=>{this.activePage=this.buttonBox.children.findIndex(h=>h===r)}),this.buttonBox.addChild(e),t++}}layoutChildren(){this._layoutNotify&&this.emit("layout",null),this._needsLayout=!1;const t=this._children[0];this.applyHints(t),t.x=this.x,t.y=this.y,t.layoutChildren();const i=this.h-t.h,e=this.w;for(let s of this.children)s.y=this.y+t.h,s.x=this.x,s.w=e,s.h=i,s.layoutChildren()}_draw(t,i,e){this.draw(t,i);let s=this.getTransform();if(s){i.save(),i.transform(s.a,s.b,s.c,s.d,s.e,s.f);let h=this._children[0]??void 0;h!==void 0&&h._draw(t,i,e);let n=this.children[this.activePage]??void 0;n!==void 0&&n._draw(t,i,e),i.restore();return}let r=this._children[0]??void 0;r!==void 0&&r._draw(t,i,e);let l=this.children[this.activePage]??void 0;l!==void 0&&l._draw(t,i,e)}}class Ot extends S{numX=1;numY=1;spacingX=0;spacingY=0;paddingX=0;paddingY=0;orientation="horizontal";constructor(t=null){super(),t!==null&&this.updateProperties(t)}on_numX(t,i,e){this._needsLayout=!0}on_numY(t,i,e){this._needsLayout=!0}on_spacingX(t,i,e){this._needsLayout=!0}on_spacingY(t,i,e){this._needsLayout=!0}on_paddingX(t,i,e){this._needsLayout=!0}on_paddingY(t,i,e){this._needsLayout=!0}on_orientation(t,i,e){this._needsLayout=!0}layoutChildren(){this._layoutNotify&&this.emit("layout",null),this._needsLayout=!1;let t=this.getMetric(this,"spacingX",this.spacingX),i=this.getMetric(this,"spacingY",this.spacingY),e=this.getMetric(this,"paddingX",this.paddingX),s=this.getMetric(this,"paddingY",this.paddingY);if(this.orientation=="horizontal"){let r=this.numX,l=Math.ceil(this.children.length/this.numX),h=this.h-i*(l-1)-2*s,n=this.w-t*(r-1)-2*e,a=new Array(r).fill(0),u=new Array(l).fill(0),c=0,f=0,d=0;for(let p of this.children)this.applyHints(p,n,h),"w"in p.hints&&(a[f]=Math.max(p.w,a[f])),"h"in p.hints&&(u[c]=Math.max(p.h,u[c])),(d+1)%r==0?(c++,f=0):f++,d++;let g=0,b=0,y=0,v=0;for(let p of a)g+=p,p>0&&y++;for(let p of u)b+=p,p>0&&v++;let C=l>v?(h-b)/(l-v):0,x=r>y?(n-g)/(r-y):0,B=this.y+s,_=this.x+e;c=0,f=0;for(let p=0;p<this.children.length;p++){let D=this.children[p],F=a[f]==0?x:a[f],j=u[c]==0?C:u[c];"w"in D.hints||(D.w=F),"h"in D.hints||(D.h=j),D.x=_,D.y=B,D.layoutChildren(),(p+1)%r==0?(_=this.x+e,B+=i+j,f=0,c++):(_+=t+F,f++)}return}else{let r=Math.ceil(this.children.length/this.numY),l=this.numY,h=this.h-i*(l-1)-2*s,n=this.w-t*(r-1)-2*e,a=new Array(r).fill(0),u=new Array(l).fill(0),c=0,f=0,d=0;for(let p of this.children)this.applyHints(p,n,h),"w"in p.hints&&(a[f]=Math.max(p.w,a[f])),"h"in p.hints&&(u[c]=Math.max(p.h,u[c])),(d+1)%l==0?(f++,c=0):c++,d++;let g=0,b=0,y=0,v=0;for(let p of a)g+=p,p>0&&y++;for(let p of u)b+=p,p>0&&v++;let C=l>v?(h-b)/(l-v):0,x=r>y?(n-g)/(r-y):0,B=this.y+s,_=this.x+e;c=0,f=0;for(let p=0;p<this.children.length;p++){let D=this.children[p],F=a[f]==0?x:a[f],j=u[c]==0?C:u[c];"w"in D.hints||(D.w=F),"h"in D.hints||(D.h=j),D.x=_,D.y=B,D.layoutChildren(),(p+1)%l==0?(B=this.y+s,_+=t+F,c=0,f++):(B+=i+j,c++)}}}}class at extends S{_scrollX=0;_scrollY=0;scrollX=0;scrollY=0;scrollW=!0;scrollH=!0;wAlign="center";hAlign="top";uiZoom=!0;uiMove=!0;zoom=1;vel=null;velCutoff=1e-5;velDecay=.95;unboundedH=!1;unboundedW=!1;_zoomCenter=null;constructor(t=null){super(),t!==null&&this.updateProperties(t),this._processTouches=!0,this._oldTouch=null,this._lastDist=null}on_child_added(t,i,e){this.children.length==1&&(this.scrollX=0,this.scrollY=0,this._needsLayout=!0,e.bind("rect",(s,r,l)=>this._needsLayout=!0),e.bind("w",(s,r,l)=>this._needsLayout=!0),e.bind("h",(s,r,l)=>this._needsLayout=!0))}on_child_removed(t,i,e){this.children.length==0&&(this.scrollX=0,this.scrollY=0,this._needsLayout=!0)}layoutChildren(){this._layoutNotify&&this.emit("layout",null),this._needsLayout=!1,this.children[0][0]=0,this.children[0][1]=0,this.scrollW||(this.children[0][2]=this.w),this.scrollH||(this.children[0][3]=this.h);for(let t of this.children)t.layoutChildren()}fitToClient(){this.zoom=Math.min(this.w/this.children[0].w,this.h/this.children[0].h),this.scrollX=.5*this.scrollableW,this.scrollY=.5*this.scrollableH}on_uiZoom(t,i,e){this._needsLayout=!0}on_hAlign(t,i,e){this._needsLayout=!0}on_vAlign(t,i,e){this._needsLayout=!0}*iter(t=!0,i=!0){if(yield this,!!t)if(i)for(let e of this._children)this.contains(e)&&(yield*e.iter(...arguments));else for(let e of this._children)yield*e.iter(...arguments)}on_scrollW(t,i,e){this._needsLayout=!0,this.scrollX=0}on_scrollH(t,i,e){this._needsLayout=!0,this.scrollY=0}on_scrollX(t,i,e){if(this.children.length==0)return;if(this._needsLayout=!0,this.unboundedW){this._scrollX=this.scrollX;return}let s=0;switch(this.wAlign){case"center":s=.5*this.scrollableW;break;case"right":s=1*this.scrollableW}this._scrollX=this.scrollableW<=0||this.scrollableW>=this.children[0].w?s:e,this._scrollX=G(e,0,this.scrollableW)}on_scrollY(t,i,e){if(this.children.length==0)return;if(this._needsLayout=!0,this.unboundedH){this._scrollY=this.scrollY;return}let s=0;switch(this.hAlign){case"middle":s=.5*this.scrollableH;break;case"bottom":s=1*this.scrollableH}this._scrollY=this.scrollableH<=0||this.scrollableH>=this.children[0].h?s:e,this._scrollY=G(e,0,this.scrollableH)}update(t,i){if(super.update(t,i),this.vel!==null){this.scrollX+=this.vel.x*i,this.scrollY+=this.vel.y*i,this.vel=this.vel.scale(this.velDecay**(i/30));let e=this.vel.abs();e.x<=this.velCutoff/this.zoom&&e.y<=this.velCutoff/this.zoom&&(this.vel=null)}}getTransform(){const t=A.get().tileSize;return new DOMMatrix().translate(Math.floor((this.x-this._scrollX*this.zoom)*t)/t,Math.floor((this.y-this._scrollY*this.zoom)*t)/t).scale(this.zoom,this.zoom)}on_touch_down(t,i,e){this.vel=null;let s=e.rect;if(this._lastDist=null,this.collide(s)){let r=Date.now(),l=e.asChildTouch(this);return this._oldTouch=[l.x,l.y,l.identifier,r,null],super.on_touch_down(t,i,e)||e.grab(this),!0}return!1}on_touch_up(t,i,e){if(e.grabbed!==this)return!1;if(this._oldTouch!=null){let s=this._oldTouch[4],r=new w([this._oldTouch[0],this._oldTouch[1]]),l=e.asChildTouch(this),h=Math.max(Date.now()-this._oldTouch[3],1),n=this.scrollableW>0||this.unboundedW?(l.x-r.x)/h:0,a=this.scrollableH>0||this.unboundedH?(l.y-r.y)/h:0;this.vel=new w([-n,-a]),s&&(this.vel=this.vel.add(s).scale(.5))}return this._oldTouch=null,this._lastDist=null,this._zoomCenter=null,e.ungrab(),!1}on_touch_move(t,i,e){if(e.grabbed!==this)return!1;let s=e.rect;if(this.collide(s)){let r=e.asChildTouch(this);if((this.uiMove&&e.nativeEvent==null||e.nativeEvent instanceof TouchEvent&&e.nativeEvent.touches.length==1)&&this._oldTouch!=null&&e.identifier==this._oldTouch[2]){this.scrollW&&(this.scrollX=this.scrollableW==0?0:this._scrollX+(this._oldTouch[0]-r.x)),this.scrollH&&(this.scrollY=this.scrollableH==0?0:this._scrollY+(this._oldTouch[1]-r.y));let l=e.asChildTouch(this),h=this._oldTouch,n=Date.now(),a=new w([0,0]),u=new w([0,0]);if(h!=null){let f=Math.max(n-h[3],1),d=this.scrollableW>0||this.unboundedW?(l.x-r.x)/f:0,g=this.scrollableH>0||this.unboundedH?(l.y-r.y)/f:0;a=new w([d,g]),u=h[4]!==null?h[4]:u}let c=a.abs().sum()===0?a:a.add(u).scale(.5);this._oldTouch=[l.x,l.y,e.identifier,n,c]}if(this.uiZoom&&e.nativeEvent&&e.nativeEvent instanceof TouchEvent&&e.nativeEvent.touches.length==2){let l=e.nativeEvent.touches[0],h=e.nativeEvent.touches[1],n=xt([l.clientX,l.clientY],[h.clientX,h.clientY]);if(this._lastDist!=null){let a=this._scrollX+this.w/this.zoom/2,u=this._scrollY+this.h/this.zoom/2,c=[l.clientX,l.clientY],f=[h.clientX,h.clientY],d=this.appToChild(c),g=this.appToChild(f),b=[(d[0]+g[0])/2,(d[1]+g[1])/2];this._zoomCenter===null&&(this._zoomCenter=new w(b));let y=this.zoom*n/this._lastDist,v=Math.min(this.unboundedW?.01:this.w/this.children[0].w,this.unboundedH?.01:this.h/this.children[0].h);this.zoom=Math.max(y,v);let C=this.appToChild(c),x=this.appToChild(f),B=[(C[0]+x[0])/2,(C[1]+x[1])/2];this.scrollX=a+b[0]-B[0]-this.w/this.zoom/2,this.scrollY=u+b[1]-B[1]-this.h/this.zoom/2}this._lastDist=n}}return!1}on_touch_cancel(t,i,e){return this._lastDist=null,e.grabbed===this?(e.ungrab(),!0):!!super.on_touch_cancel(t,i,e)}on_wheel(t,i,e){let s=A.get();if(!s.inputHandler)return!0;let r=this._scrollX+this.w/this.zoom/2,l=this._scrollY+this.h/this.zoom/2,h=e.nativeObject;if(!this.collide(e.rect)&&(!this.unboundedW||!this.unboundedH)||!(h instanceof WheelEvent))return!1;if(this.uiZoom&&s.inputHandler.isKeyDown("Control")){let n=e.asChildTouch(this);n.pos[0],n.pos[1];let a=this.zoom*Math.exp(-h.deltaY/s.h),u=Math.min(this.unboundedW?.01:this.w/this.children[0].w,this.unboundedH?.01:this.h/this.children[0].h);this.zoom=Math.max(a,u);let c=e.asChildTouch(this);return c.pos[0],c.pos[1],this.scrollX=this.scrollableW==0&&!this.unboundedW?0:r-this.w/this.zoom/2,this.scrollY=this.scrollableH==0&&!this.unboundedH?0:l-this.h/this.zoom/2,this.scrollX!=this._scrollX&&(this.scrollX=this._scrollX),this.scrollY!=this._scrollY&&(this.scrollY=this._scrollY),!0}else{if(this.uiMove&&this.scrollW&&s.inputHandler.isKeyDown("Shift"))return this.scrollX+=this.scrollableW==0&&!this.unboundedW?0:this.w/this.zoom*(h.deltaY/s.w),this.scrollX!=this._scrollX&&(this.scrollX=this._scrollX),!0;if(this.uiMove&&this.scrollH)return this.scrollY+=this.scrollableH==0&&!this.unboundedH?0:this.h/this.zoom*(h.deltaY/s.h),this.scrollY!=this._scrollY&&(this.scrollY=this._scrollY),!0}return!1}get scrollableW(){return this.children.length==0?0:this.unboundedW?this.children[0].w-this.w/this.zoom:Math.max(this.children[0].w-this.w/this.zoom,0)}get scrollableH(){return this.children.length==0?0:this.unboundedH?this.children[0].h-this.h/this.zoom:Math.max(this.children[0].h-this.h/this.zoom,0)}_draw(t,i,e){this.draw(t,i);let s=this.rect;i.save(),i.beginPath(),i.rect(s[0],s[1],s[2],s[3]),i.clip();let r=this.getTransform();r&&i.transform(r.a,r.b,r.c,r.d,r.e,r.f),this.children[0]._draw(t,i,e),i.restore()}}class Ht extends W{closeOnTouchOutside=!0;bgColor="slate";outlineColor="gray";dim=!0;dimScale=.8;constructor(t=null){super(),t!==null&&this.updateProperties(t)}popup(){if(this.parent==null){let t=A.get();return this.parent=t,t.addModal(this),!0}return!1}close(t=0){if(this.parent!=null){this.emit("close",t);let i=A.get();return this.parent=null,i.removeModal(this),!0}return!1}on_touch_down(t,i,e){return this.closeOnTouchOutside&&!this.collide(e.rect)?(this.close(),!0):super.on_touch_down(t,i,e)}draw(t,i){if(this.dim){let e=A.get().baseWidget.rect,s=A.get().ctx;if(!s)return;s.fillStyle="rgba(0,0,0,"+this.dimScale+")",s.rect(e[0],e[1],e[2],e[3]),s.fill(),super.draw(t,s)}}}class Qt extends Array{constructor(t,i){super();for(let e=0;e<t.length;++e)i[e]?this.push(t[e],i[e][0],i[e][1]):this.push(t[e],0,0)}*iter(){for(let t=0;t<this.length/3;t++)yield this.slice(t*3,t*3+3)}}class Ft extends S{spriteSheet=null;frames=[];timePerFrame=30;timeLeft=0;activeFrame=0;id="";facing=0;flipX=!1;flipY=!1;oneShot=!1;constructor(t={}){super(),t&&this.updateProperties(t)}update(t,i){if(super.update(t,i),this.timeLeft-=i,this.timeLeft<=0){if(this.oneShot&&this.activeFrame===this.frames.length-1){this.timeLeft=1/0,this.emit("animationComplete",this.activeFrame);return}this.activeFrame++,this.activeFrame>=this.frames.length&&(this.activeFrame=0),this.timeLeft+=this.timePerFrame}this.frames.length>0&&this.timeLeft!==1/0&&t.requestFrameUpdate()}restart(){this.activeFrame=0,this.timeLeft=this.timePerFrame}on_frames(t,i,e){this.restart()}get frame(){return this.frames[this.activeFrame]??-1}draw(t,i){if(this.spriteSheet===null||!this.spriteSheet.sheet.complete)return;const e=Math.floor(this.x*t.tileSize)/t.tileSize,s=Math.floor(this.y*t.tileSize)/t.tileSize;if(i.translate(e,s),i.scale(this.w,this.h),this.frame instanceof Qt)for(let[r,l,h]of this.frame.iter())this.spriteSheet.drawIndexed(i,r,0,0,this.facing,l,h);else this.spriteSheet.drawIndexed(i,this.frame,0,0,this.facing);i.scale(1/this.w,1/this.h),i.translate(-e,-s)}}class ut extends S{constructor(t={}){super(),this.defaultValue=-1,this._data=new lt,this._vLayer=null,this._aLayer=null,this._cacheTileDim=new w,this.tileDim=new w,this.hints={w:null,h:null},this.spriteSheet=null,this.clipRegion=null,this.alphaValue=.5,this.useCache=!0,t&&this.updateProperties(t)}serialize(){const t={};return t._data=this._data.slice(),t.tileDim=this.tileDim.slice(),t.spriteSheet=Array(...A.resources.keys()).find(i=>A.resources[i]===this.spriteSheet)??null,t}get(t){return this._data.get(t)}set(t,i){this._data.set(t,i),this._data._cacheData=null}get data(){return this._data}deserialize(t){this.tileDim=new w(t.tileDim??[0,0]);const i=t._data;for(let e=0;e<i.length;e++)this._data[e]=i[e];this.spriteSheet=A.resources[t.spriteSheet]??null,this._data._cacheData=null}on_tileDim(t,i,e){this.resizeData(),this.w=this.tileDim[0],this.h=this.tileDim[1],this._cacheTileDim=new w(this.tileDim)}resizeData(){let t=[];for(let e=0;e<this._cacheTileDim[1];e++)for(let s=0;s<this._cacheTileDim[0];s++)t.push(this.get([s,e]));this._data.tileDim=new w(this.tileDim),this._data.length=this.tileDim[0]*this.tileDim[1],this._data.fill(this.defaultValue);let i=0;for(let e=0;e<this._cacheTileDim[1];e++)for(let s=0;s<this._cacheTileDim[0];s++)s<this.tileDim[0]&&e<this.tileDim[1]&&this.set([s,e],t[i]),++i;this._data._cacheData=null}draw(t,i){if(super.draw(t,i),this.spriteSheet===null||!this.spriteSheet.sheet.complete||!this.spriteSheet.sheet.complete||this.spriteSheet.sheet.naturalHeight==0)return;let[e,s]=[0,0],[r,l]=this.tileDim;if(this.clipRegion&&([e,s]=this.clipRegion.pos,[r,l]=this.clipRegion.pos.add(this.clipRegion.size).add([1,1]),e=Math.min(Math.max(e,0),this.tileDim[0]),r=Math.min(Math.max(r,0),this.tileDim[0]),s=Math.min(Math.max(s,0),this.tileDim[1]),l=Math.min(Math.max(l,0),this.tileDim[1])),Math.floor(this.spriteSheet.sheet.width/this.spriteSheet.spriteSize),Math.floor(this.spriteSheet.sheet.height/this.spriteSheet.spriteSize),this.useCache){if(this._data._cacheData===null&&this.cacheCanvas(),this._data._cacheData===null)return;const h=this.spriteSheet.spriteSize;if(i.drawImage(this._data._cacheData,h*e,h*s,h*(r-e),h*(l-s),this.x+e,this.y+s,r-e,l-s),this._aLayer===null&&this._vLayer===null)for(let n=e;n<r;n++)for(let a=s;a<l;a++){let u=n+a*this.tileDim[0],c=this._data[u];c<-1&&this.spriteSheet.drawIndexed(i,c,n+this.x,a+this.y)}else if(this._aLayer&&this._vLayer){const n=this._aLayer,a=this._vLayer,u=i.globalAlpha,c=this._data;for(let f=e;f<r;f++)for(let d=s;d<l;d++){let g=f+d*this.tileDim[0],b=c[g];b<-1&&a[g]>0&&(n[g]===0?(i.globalAlpha=this.alphaValue,this.spriteSheet.drawIndexed(i,b,f+this.x,d+this.y),i.globalAlpha=u):this.spriteSheet.drawIndexed(i,b,f+this.x,d+this.y))}}}else if(this._aLayer===null&&this._vLayer===null)for(let h=e;h<r;h++)for(let n=s;n<l;n++){let a=h+n*this.tileDim[0],u=this._data[a];this.spriteSheet.drawIndexed(i,u,h+this.x,n+this.y)}else if(this._aLayer&&this._vLayer){const h=this._aLayer,n=this._vLayer,a=i.globalAlpha,u=this._data;for(let c=e;c<r;c++)for(let f=s;f<l;f++){let d=c+f*this.tileDim[0],g=u[d];g!==-1&&n[d]>0&&(h[d]===0?(i.globalAlpha=this.alphaValue,this.spriteSheet.drawIndexed(i,g,c+this.x,f+this.y),i.globalAlpha=a):this.spriteSheet.drawIndexed(i,g,c+this.x,f+this.y))}}}clearCache(){this.data._cacheData=null}cacheCanvas(){if(this._data._cacheData=null,!this.spriteSheet||!this.spriteSheet.sheet||this.tileDim[0]<=0||this.tileDim[1]<=0)return;const t=new OffscreenCanvas(this.tileDim[0]*this.spriteSheet.spriteSize,this.tileDim[1]*this.spriteSheet.spriteSize),i=t.getContext("2d");if(!i)return;i.scale(this.spriteSheet.spriteSize,this.spriteSheet.spriteSize);let[e,s]=[0,0],[r,l]=this.tileDim;if(this._aLayer===null&&this._vLayer===null)for(let h=e;h<r;h++)for(let n=s;n<l;n++){let a=h+n*this.tileDim[0],u=this._data[a];u>=0&&this.spriteSheet.drawIndexed(i,u,h,n)}else if(this._aLayer&&this._vLayer){const h=this._aLayer,n=this._vLayer,a=i.globalAlpha,u=this._data;for(let c=e;c<r;c++)for(let f=s;f<l;f++){let d=c+f*this.tileDim[0],g=u[d];g>=0&&n[d]>0&&(h[d]===0?(i.globalAlpha=this.alphaValue,this.spriteSheet.drawIndexed(i,g,c,f),i.globalAlpha=a):this.spriteSheet.drawIndexed(i,g,c,f))}}this._data._cacheData=t}}class jt extends ut{constructor(t={}){super(),this._layerData=[this._data],this.numLayers=1,this.activeLayer=0,this.visibilityLayer=-1,this.alphaLayer=-1,t&&this.updateProperties(t)}on_alphaLayer(t,i,e){this._aLayer=this.alphaLayer>=0?this._layerData[this.alphaLayer]:null}on_visibilityLayer(t,i,e){this._vLayer=this.visibilityLayer>=0?this._layerData[this.visibilityLayer]:null}serialize(){const t={},i=[];for(let e of this._layerData)i.push(e.slice());return t._layerData=i,t.activeLayer=this.activeLayer,t.numLayers=this.numLayers,t.tileDim=this.tileDim.slice(),t.spriteSheet=Array(...A.resources.keys()).find(e=>A.resources[e]===this.spriteSheet)??null,t}deserialize(t){this.numLayers=t.numLayers,this.activeLayer=t.activeLayer,this.tileDim=new w(t.tileDim??[0,0]);const i=t._layerData.length;this._layerData.length=i;for(let e=0;e<i;e++){const s=this._layerData[e],r=t._layerData[e];for(let l=0;l<r.lenth;l++)s[l]=r[l]}this.spriteSheet=A.resources[t.spriteSheet]??null,this.clearCache()}on_tileDim(t,i,e){if("_layerData"in this){for(let s of this._layerData)this._data=s,this.resizeData();this.activeLayer>=0&&(this._data=this._layerData[this.activeLayer]),this.w=this.tileDim[0],this.h=this.tileDim[1],this._cacheTileDim=new w(this.tileDim)}}on_numLayers(t,i,e){const s=this._layerData.length;this._layerData.length=this.numLayers;for(let r=s;r<this.numLayers;r++){const l=new lt(this.tileDim).fill(this.defaultValue);this._layerData[r]=l}this.activeLayer>=this.numLayers&&(this.activeLayer=this.numLayers-1)}on_activeLayer(t,i,e){this._data=this._layerData[this.activeLayer]}get layer(){return this._layerData}getFromLayer(t,i){return this._layerData[t][i[0]+i[1]*this.tileDim[0]]}setInLayer(t,i,e){this._layerData[t][i[0]+i[1]*this.tileDim[0]]=e,this._layerData[t]._cacheData=null}clearCache(){for(let t of this._layerData)t._cacheData=null}draw(t,i){for(let e of this._layerData)e.hidden||(this._data=e,super.draw(t,i));this._data=this._layerData[this.activeLayer]}}A.registerClass("Widget",S,"");A.registerClass("App",A,"");A.registerClass("Label",L,"");A.registerClass("Button",zt,"");A.registerClass("ToggleButton",nt,"");A.registerClass("BasicButton",Yt,"");A.registerClass("TextInput",Et,"");A.registerClass("CheckBox",kt,"");A.registerClass("Slider",Lt,"");A.registerClass("ImageWidget",Z,"");A.registerClass("BoxLayout",W,"");A.registerClass("GridLayout",Ot,"");A.registerClass("ScrollView",at,"");A.registerClass("ModalView",Ht,"");A.registerClass("Notebook",ot,"");A.registerClass("TabbedNotebook",_t,"");A.registerClass("SpriteWidget",Ft,"");A.registerClass("TileMap",ut,"");A.registerClass("LayeredTileMap",jt,"");const Wt="data:image/png;base64,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",Rt=""+new URL("terrain_forest-b1wfcO2N.png",import.meta.url).href,Gt=""+new URL("terrain_mountain-BHSXZlOG.png",import.meta.url).href,Vt=""+new URL("terrain_water-CwCS32Q_.png",import.meta.url).href,Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAWJSURBVHic7dtNbFRlFMbx57x3WkBSIhIQhARWBBa6cGEktXUUWLnhQ8fEuIAYnILAog4UFnY6mAiF8h2tAwv3EI0LF0aNzgwQDAQT0SAsTIiJiBg0Sg1IO+9xQTszLW35mnun9Dy/VZn7cd7O/XN7M01FVUF2uVovgGqLARjHAIxjAMYxAOMYgHEMwLhYLYe3nXijQX39yoF/q1cBABGR0mvQ8tfSv927214DAMGt4ypfc778te/f7qTynOVzSf++g2eW1yIysP32YyrnOsjw6+tfd+n7AIqT/ax96Xi6b/h3KHw1DUCL9WmFvl16of+tUgz/4VTpvZTydhm0hw7dDC1fi9K+WnlUxQdhlSkNe/7+HaRyfVL5pVSs4raTQmXw96UArgWXiwD2okakVp8EpnLJBeLkLIC6mixg7Pint7c4f9/iw7/XYnjNngGckwPgxQeAKXX1wfZaDa/JHWBTfu1yiH4S+eCxS53Is51N3aeiHhz5HSCTWz1RRfdEPXeMk6LqQal4eIxK5AH0uPo2AeZFPXesE+CZVD65KvK5Uf4I2JpbO6/P6TkAkyIb+nC5EtzU+TuWZP+OamCkd4A+p7vBiz+aGb4O6SgHRnYHSOVblorgi0iGPdz6HIKnOpvf/ymKYZHcAZJnknUiuj+KWeNAzIs/ENWwSAJo+BcbAVkYxaxxQXVJqtCyIopRof8I2Jx7a6a64gUAU+7j8L8AFFQkr4qci+FX6fVbVGQdgAnVXenYosDFBv/fwnT8oxthzgn9dwHqip24+4v/pygKXpBz3ucnx2efTSPth+zTmvp6/X6J9W0D8DoifJAV4MsifEegsUClmADkZQAzQ5o175pM2AxgWxjnL80J8w6wKd+yCIITGPo7m7KrAPJQzcMFua6m7h8Ud7+g1kLyyQCyHcBL1VjvSBT4Bl7bu+LZ45WvZ5BxPbnLzQiQgOpKADOqPPp6EOiCHY3ZX6p83pLQAsgg43oKv50G8HTFuD8AX4C4XFF9fm/zoR/v5YKPJFVoaRZgB4BFD3quIY7BS/uueHfuTjsmjiaCuY9Pex7wCcCtAHT6gw5X4JTr09d2vpj9+UHPNZLQAkgVWt4U4F2I5EV93gWa62w8fK4aF3zEmceSy0TxXhUeOE/C+/Zd8UNf3c/BiaOJYO70R19A4BJQrAAw7R5PcUNU0hevXN195JUjxftZw90KLYC2Exue6Gw8eCmUk4/i1v/Ex1YByACYfW9Hy2nx2r4z/uHn1VpPJpeJXQsuL4b6hECWA5g66gqAb73X1V3x7PlqrWHUeeP1L4NaT7ZOit28vkFFt+AObzqA78RJeudz3Z+FuabkmWRdQ48uAVxCBMsAPFqx+YYA70xunrVnmAff0IzbAAZsPb5uaq8Wt4jKRgATB21UfK9OO7qasp9Gva7MuUR9z9WpSwG8CrhZzsn6zsYPLkS9jnEfwIC23Jo53gUdAFap4jwcOnY3ZT8O85nkYWAmgAFtuTVzHonPuRTlbXYsMxcADca/CzCOARjHAIxjAMYxAOMYgHEMwDgGYBwDMI4BGMcAjGMAxjEA4xiAcQzAOAZgHAMwjgEYxwCMYwDGMQDjGIBxDMA4BmAcAzCOARjHAIxjAMYxAOMYgHEMwDgGYBwDMI4BGMcAjGMAxjEA4xiAcQzAOAZgHAMwjgEYxwCMYwDGMQDjGIBxDMA4BmAcAzCOARjHAIxjAMYxAOMYgHEMwDgGYBwDMI4BGMcAjGMAxjEA4xiAcQzAOAZgHAMwjgEYxwCMYwDGMQDjGIBxDMA4BmAcAzCOARjHAIxjAMYxAOMYgHEMwDgGYBwDMI4BGMcAjGMAxjEA4xiAcQzAOAZgHAMwjgEYxwCMYwDGMQDjGIBxDMA4BmAcAzDuf7SlllCaB2EXAAAAAElFTkSuQmCC",Nt="data:image/png;base64,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",Jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk4wAAJOMBC1AsFAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAa+SURBVHic7d1LbFRVHMfx3/9My4CtAoVQMAYMBk3YqBCDBPqwlLBwpYkYE0OCBqclpkA70yqE1BJ5SFsgYF9gbNCokW5YiFUSSV/SBQsSTVgQSUQNDyVVqDQ4Zc7fBRZLO9PO3Humt73n/9l15p5/D5kvd+48AsTMEPZSXm9AeEsCsJwEYDkJwHISgOUkAMtJAJaTACwnAVhOArCcBGA5CcByEoDlJADLSQCWkwAsJwFYTgKwnARgOQnAchKA5SQAy0kAlpMALCcBWE4CsJwEYDkJwHISgOUkAMtJAJaTACwnAVhOArCcBGA5CcByEoDlJADLSQCWkwAsJwFYTgKwnARgOQnAchKA5SQAnyIQJXOcBOBD5T2bF1d0h0LJHCsB+FBA81pi7A53hOaOd6wE4EfMxQByFKm94x0qAfhMDWoUCEUAwMRvRnpCK8Y6XgLwmf6e688CyPnvR4KmhhrUJHycJQCfUTq2dsRNy293Xkl4QSgB+A4Vj7yFiRJeEEoAPlLeWz6DgVVx7ppNivbFWyMB+IiKDqwGMD3B3W9UdGx+ftSa9G5JTCjFo07/w5BSetQFoQTgI8Sjn/9HWNbfebXkwTXyP4f6QrgjNJcU/Q5gvM8A/syk6FN78j7+A5AzgG+QUkUY/8EHgNlRzrx/QSgB+AWN+fz/4KGgjUMXhBKATzBj5BtAYyGldGMNapRcA/hA5ZnQE5xBP6W6jsBvyxnABzhDJX36f2AdaIsE4As6ldP/fUw4IAFMcffe2KEXUl1HwI+/XOs7JgFMcQMdV5fh/49/k8agrSdeORGTAKY4TXg51TXEOFmb33QGADLMb0lMhKqOTY9pFTgMwkspLo0ixuGhHySAKWZ92/rAwvlzykgFdgHITnU9Ex+qLWq5NPSzBDCFRHpCKxbl5jSD+Rkn6wm4/s+04O7ht0kAU8C2jo2zMgLT94ApBBfv3jKw4/CKw7eG3yYBTHLhzpLXMlXwIDPnuhx1Pjt/QevIGyWASaqyq2QJEzUSodjEm/UMbK1GtR55uwQwyZS1lwWnPRStIsJ2MAeNDCVqq8tr6op3lwQwiUS6SouCWdwE4EmDY+9kxFCZ6E4JYBKInC2dh0GuB+F189O5fm9h88+J7pUAPEQgqugKbSJgHwizzf8GvjKgM+J+HXyIBOChis5QMRFa0jWfge0NhQ1/j3WMfBbgIQWelb7pdK4+/+gn4+9BeEYrzEzbcOYtjPG/7iUBeIg0PZKWuYQvaguae5M5VgLwEKXnDDAQ40BVsgdLAF7idARAtfX5Db8me7QE4CFtPoDfsrP0/lQWSAAeIjIdAFdVL28ZSGWFBOAtkwH01ua3fJ7qIgnAW6ZeBTCz3uJkoQTgLVNngE/rCo6ec7JQAvCWiQBuq0Dmu04XSwDeMhAA7f1g1ZErTldLAB4pay8LAnD3hQ/iy9n6Tr2bERKAR4IzB13/7SeNSHVh6x03MyQAj8Siyu0rgO79BS1tbvchAXhEZbCbM4DWIEcv+0btw8QQkTrSrgJorc9vOm9iHxKAR4i4wOHS/sHB2A5T+5CvhE0wAlG4K7QfQHjcg+OtZ3r/0Jpj143tR/6NoIlT1l4WnJYVPU7Aq44GEC5lz+lbWr30RNTUnuQMMEG2dWycFcyafhKA01M/GBw2+eADcgaYEO98H1oYi1E7gKUuxpypzW9eY2pPQ+QMkGYVPSVPK42vATzqYkwMpLaZ2tNw8iogjcKdJWuVRjdAbh58EHCsNq/xB1P7Gk4CSJPKrpINRDgF4GGXo25qzTtN7CkeCSANIl2lOxg4DiDT9TDGrrrClhvudxWfXAMYtL5tfeDx3JxGAG8ZGnnxVjYfMTQrLgnAkMjpDVmLcnO+ZOBFUzNJUUXL8uZBU/Pi/g55Gehe5GzpPNzFVwA/Z3Ds6dr85nUG58UlZwCXKrtKlhDwDQOLDY69y4S0vOwbSS4CXYh0lqxkoNfwgw+Am+vymi+YnRmfBOBQuLt0HQjfAZhjeHRfLDNWbXhmQhKAQ8Q6D8AM83Px3oGVH/WZnpuIBOAQgf5Kw9gLWbygKQ1zE5IAHNLExgNgovLqwuq7pueORQJwSGncNDzyVF1e07eGZ45LAnBIm30KGNRKlxuclzQJwDFtLABi/rB+9dGLpualQgJwiAPGngJuDHJ0l6FZKZMAHFIqYOQMwISdBwtb0/GKIinyVrBD2dH5ff3q6lZiZgIxK2JizZqJFZi1IiYmHvqn2oiJWWkmpnvHMzMRYpev9X3m5Z9DPgyynDwFWE4CsJwEYDkJwHISgOUkAMtJAJb7F7cIxao9ZUM0AAAAAElFTkSuQmCC",Xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAU7SURBVHic7dpNbFRVGMbx5z13RA1gQIKCkLCVhRtdkdp2FFy5QdAxMcbgAtsgYFKKlIWdDibSgUENRNuBBbiF+LFwYQLRmQGCgWiiEiwLk8ZERUw1ShNqy5zXBYUO0vLVueeWPu9v1c6997yn7T/TaeeKqsLwcklvwCTLAiBnAZCzAMhZAOQsAHIWADkLgJwFQM4CIGcBkLMAyFkA5CwAchYAOQuAnAVAzgIgZwGQswDIWQDkLAByFgA5C4CcBUDOAiBnAZCzAMhZAOQsAHIWADkLgJwFQM4CIGcBkLMAyFkA5CwAchYAOQuAnAVAzgIgZwGQswDIWQDkLAByFgA5C4CcBUDOAiBnAZCzAMhZAOQsAHIWADkLgJwFQM4CIGcBkLMAyFkA5CwAchYAOQuAnAVAzgIgZwGQswDIWQDkLAByFgA5C4CcBUDOAiBnAZCzAMhZAOQsAHIWADkLgJwFQM4CIGcBkLMAyFkA5CwAchYAOQuAnAVAzgIgZwGQswDIWQDkLAByFgA5C4CcBUCOLoAtpbWLc8jRfd0TEVVNeg9BbCmtXexd1AVgjSr64NC1q7H4sYLkGzCBaR/A1mPr5o5otUNUNgK475qDiu/UaVehsfhZ6H3lzmRmDA7MfQbAi4Bb6Jyszzd8eDb0PqZtAG0n2u5PDV/coKIdAObe5PRvxUl2x5M9n8e5p5ZvWu6ZPagrAJcRwUoAc2oODwnw1symhe9mkfVx7qNWbAFsOb7hkXzDnl9jWfwGMocy0ZKHH1wDIAdg0e1dLafEa+eOdO8X9dpPrpRLXYjOLYf6jECew01iFOBr7/XVQrrYV6893HBeXAG0V1pfE+BtiJRFfdlFWso37DsT5+/c9qMtK0XxDiBLJ7nUCXjfuTO998idXJw5lImWzJ/zFCKXgWIVgHm3ucSQqGT7zw/sOvjCweqd7OFWxRZADjk3WPntFIDHa8b9AfgKxJWq6svvNe09XY8g2iutTQJ0A1g22bX+5yi8dO5M95RuduLlZ555zYDPAG4VoPMnO1yBk+6SvrTj6eJPk11rIrG+Bthcbl0GwXEAMsEpAwDKUC3DRaVCY88PtxNEW6XlsQiyHcCz9djvRBT4Cl47C+nisdrHc8i5wdK5JkTIQHU1gIfqPPpiFOmj3Q3Fn+u87lWxvwjcXGn9CMArt3j6n6KoeEHJeV+emV70/XgviNq/XL9EUpe2AXgZAf+XIcDhKnxXpKlIpZoB5HkAC+Kap4psobl3W1zrAwECeLP0+gJ11bMAHriDy/8CUFGRsipKLoVfZMR3qMg6APfWd6dTiwL9s/2/S7Pp/UNxzgnyZ2B7pWWTQAqxD5pGFFhdaOr9JO45QZ4+L8zEbkB/DDFrWhA5EuKHDwQKoPhEcURV3ggxaxq45NRtDDUs2AuoQnPvYQBBqr6bieqefNMHwZ4tg74rlvKyCcDFkDPvMufdCHIhBwYNYHu6px/QfMiZdxVFR/eK4t8hRwZ/X3yWH84r0B967lSnwMlCc/FA6LnBA8im9w+JSlvouVOcRiIbkrg3IZE7Y3Y293wqwOEkZk9JggP5xp6TSYxO7NYo73UjgJGk5k8h/4wMV7cmNTyxAArpYp9Adic1f6pQka73l+/7Pan5qaQGA4BEwzn4GaevfK5eBQBE5Oq7hwod+1hGj3t33WMAILh8Xe1jzo997EePO6ldc2wtGT332pljexG5cvz6a2rnOsj4+xvd99WvA6jOqi7YM/53J4xpe0uYuTV2ezQ5C4CcBUDOAiBnAZCzAMhZAOT+A0T1f5Fw5q+pAAAAAElFTkSuQmCC",Kt="data:image/png;base64,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",Zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk3AAAJNwBpqKzUAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAb8SURBVHic7d1bbFRVFAbgf+1TegU0hCCgYrw8qNFoJBqVdqZRY4IPkpiIkYhRTJlCYyNtKQiYpioUpi0FDW0HI+qjkOijUQxOWyoQAvhUFGMixoiJtSilXDqdvXwoNtTeZs7sc06dvb4XkmnPOovsP3ufa4eYGcJeKugGRLAkAJaTAFhOAmA5CYDlJACWkwBYLifInUdORGbMGsAKYlJERAwmJibSavhfEAEAE5PSTBpEwz9RRJqv/T5Rcyj2HkMuaLgRaABmX0IFQC0ggDE8fsQEEIMAYOQzgIlAABgEMIMJAIY/q+1etQ9L0B/If+J/LrAloCYemQumOiPFEuoGI3UsFFgAyFFvA7jRSK0ZJAFwKZAArI+vuQ/Mq03VSyQhAXApmBnAQQsAx1g5rWabqmUb3wNQ3bn2WTA/ZbSokhnALV8DUN+zPFch2Wy6roYEwC1fTwMHeudUArjLdF0FyBLgkm8BWP/tmnkAtnhQuh9ERzyoawXflgAa4ndgfqo+R1qHoiVt3YbrWoP8eCSs+nD5A0rjJMwGrsdxeOn2JbFfDNa0ji8zgGLsMryvzhylimXwM+d5AGo6y58Do9RYQaIDVwdyn24obj1vrKbFPF0CKr+ozMsvGuxh4A4T9Yi5pTG8t1ru/Jnj6QyQVzT4hqHBZxCvi4ZjVTL4Znk2A9TGK+azSp4BMCvDUleJeWU0HDtgoi8xmmfXAbQa2kqgTAf/PLFaFg23dhlpSozhyQxQ2xV5iJmOI5Mlhvis4pylO0J7TpvrTPyXJzMAM2V62vfdEPBMS2jPOVM9ifEZPwis7Yg8D6DE7fYEHFROItRSEpPB94HRJaA+/mr+RSf3ezDd5rKdTy4U6bLY4ljCWFNiUkaXgIsqvxrMLgeftzaG2r24WSQmYWwG2ND9+kKdTJwBUJR+F9jUWNLeYKQRkRZjxwA6mWiAm8EHoFl3mOpDpMdIAGo6Vj8MYKXb7Wc4+NtEHyJ9RgJA5OwCrr3L4QInWAIQkIwDUNNR/iLAj2dS43JBwYVM+xDuZHQQWHWkqsBJXPoBwK0Z9KCbQrEcuckTjIxmACcxUIvMBh8A+mXwg+M6ABviZbcAVGugB1n/A+Q6AKyc7QAKM22AJACBchWA6vjaRxlYYaIBJglAkNIOAIGIlN6NDE77RmHIGUCA0g5AdUf5SwQ8YqoBkhkgUGkFYP1XLxcRsdlr9iwBCFJaAaD8wo0AbjbZAMtBYKBSDsDG7sgiBqqNdyBLQKBSDsBQkqIACkw3wFoCEKSUAlATjxQT8IIXDZCSs4AgTRmA4dM+2uVZBzIDBGrKANR0RF4BsNirBgjqL69qi6lNGoCKeMVMELZ5tO8/CfRaY7jtsEf1RQomDUAhJTcBmG96p8z4mDXfHQ217ZM7gcGa8HmA9Z1ltwPOaQB55nbHp4l4TbRkrzwDOE1M8li4aoS5wb8C0Lsz5/Y11t27f9BQTWHAuDNAbdfqMLOKG9rHlzTEFdEnYj8ZqicMGjMD1KNeMSsTp33nCFgXDbV/aqCW8MiYg8D+rt9WAXgwg5qagT3OIN8jgz/9jVoCKo9Vzs67OvgjgHku651i1pGm8N7jRroTnhu1BORdGdwCcjX4F0H81tnfz7+///n9SUO9CR+MzAC1hyJ3cg71AMhNs8bnSicrd5R+8Kvx7oTnRmYAzqFmpDv4jIbGcPsm000J/ygAqO4qfxLAsrQ3ZnxmvCPhK7X8wHLHYbS42LavsHTBSeMdCV+pRfPnlDFwf/qb8jd1qNPmWxJ+UsSocrnpQbOtiCAoAu92syEN6a9NNyP8p4pCC9sAnEpnIwZ+lmv72UHVoU5rrdbi36/pTAERZPrPEgoAmktbjzL4o5S3YpLpP0uM3AzKpcRGAKn8DX5mrQ9515Lw00gAtpXs+4M5pS91OtVUGuv1sCfho1G3g2eFF7QDmPTiDhPL9J9FRgXg2gFhBSY7INSy/meTMQ+ENJe2HgWwb4Lfv6JzC+Ux7iwy7mPhrHncA0ICunc+tvOy510J34wbgKbSWC8xbx77E1n/s82EL4YUhRfGAJy4/jOtHLkAlGUmDEAd6jQUX39A2Der+Ka0LhmL6W/SV8Mai2PHiOlDAADjkNz+zT5Tvh2sWb8JoA8kp3/ZaMoANJXGepmwOalI1v8slNIfiyYQyVu82cmXr48X05cvXx8vpi8JgOUkAJaTAFhOAmA5CYDlJACWkwBYTgJgOQmA5SQAlpMAWE4CYDkJgOUkAJaTAFhOAmA5CYDlJACWkwBYTgJgOQmA5SQAlpMAWE4CYDkJgOUkAJaTAFhOAmA5CYDlJACWkwBYTgJgOQmA5SQAlpMAWE4CYDkJgOUkAJaTAFhOAmA5CYDlJACWkwBYTgJguX8AXU0LHZkP+GkAAAAASUVORK5CYII=",qt="data:image/png;base64,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",$t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk1gAAJNYB/dZ4vAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAaeSURBVHic7Z1JiBxlFIC/V9XbTNImZpWg2XDBUfAQExMNQc1BycFTXBJFjIqKkkSIxIsgQ5BIFIJGkqBIRHFBPQjiiicRFS9qFkWQJG4JouiMySTTS9XvoXvizPRM4nRXdXXlvQ+Krvq7+9Vr6pv/f1P1V7c45zD04iWdgJEsJoByTADlmADKMQGUYwIoxwRQjgmgHBNAOSaAckwA5ZgAyjEBlGMCKMcEUI4JoBwTQDkmgHJMAOWYAMoxAZRjAijHBFCOCaAcE0A5JoByTADlmADKMQGUYwIoxwRQjgmgHBNAOSaAckwA5ZgAyjEBlGMCKMcEUI4JoBwTQDkmgHJMAOWYAMoxAZSTSTqBVji8TgpHB5DcIJKdimQGEb+E+EWkv4z4FcTvRrIn8bwCMlBF/CriFZBCH30Xvu9KSX+GpEmtAAdulYdwPHcOQAEYBAdU81At15rIAhUIMhBUIQe1T1yFUpE3gDUJpd8xSBp/L2DfalnoeewFJrUSRxyret5yH0SUVipJXw0gIuKxhxYPPoATdu69U1qOk2ZSJ8D+m9kgsCKicPO9Er0RxUolqRoCvl8tF4Ue3wDdUcUUCAhZ3PO2+zqqmGkiPT1Ar3hhreuP7OADOPDxeOGtW8SPMm5aSI0A3x3gYeCaOGI7WNQjbIgjdqeTiiFg7y1yiQ/fUP/vLiYGBHp63nQ/x7iPjiMV5wE+dYvvybvSqTFaZPiz7tSWuLFa688Nf904++ln8qYe2NhSsikjFQL84ObOBZadavg/nVZzHVtfU+9KMampAYx4MAGUYwIoJxU1wFj8HUAwqm2yB4XxKjxjTFIrwEcnhD/DkUf72i7H5bnG6i8/8At+ub+hPcxMZrA4P64UU0FqBZgIuRNHyA/82tBe7pqtXgCrAZRjAigntUPAghzMCEeO91NN5wmTWgGuynf+NYw0YH8zyjEBlGMCKMcEUI4JoJxU/BcgYbg1gJeafX8pP3tONVM8Z3R76BcGwjD8ZWg7k8n80ew+0koqpoQlzaHbZYWDy3CIOAQPCR2CQ8SrPeIQBBFq66Eg1CYfOT/Pjvl73GDSn2MsUtEDJMmh22Wec7wHTIb6VDNXn1ZWX2dofWhTRk47C0pMAR5rT8YTw2qA0yEiDl6kfvCbDgObf1wrl0WUVaSYAKfh4G3cj2NlBKGyHjyPSMfNVrAaYBwOr5H5obCPFv/6RyA8uPBVtyuyeBGQoAAiPLV4NpVQyBSESihkw9pjJi9khtZDoeoEMh5+fd3PCierR3n8y39iSk0OruET4PqII/f7PpfOe8UdjThu0yRXBG5buh7HM/g+uKCWiRPI+EAVqtQqqcCrV1QOQgFPaq8veB8DN8SR2sG1PICL/OADTAkCdgCrY4jdFMn0AE9efSHivqXV+/yEO9j8xavRJFXjpztlQVBlL1F2/aMQuGnBa+7duOJPhPYXgb3iIS6amzwd29l+9bTWk/qPaiC7qH23SAkoj1oqw5bqsCUYtoSjFjdsqafNzq/umN5wYioJ2j8E5JduBJZHFG0mZfc0cHcUwXrXrSvkivfFMqyM4nycu34JvNOGfZ2W9vYA25ZfgvBExFHXsW3pdRHHVEP7BOgVD6p7gK7IYzvZzY5V+cjjKqB9AuSXbcLJsjO/sCku5sTfHXmqtdNpjwDbll2KuC0x7+VRti7tiXkfZx1tKQI/PH7FXVmp7B/aHnk+dJz79hvu7z/zewaC/COrIioIh+irBHzW3/h9kqumd+F13pndCdMWAQ5Xp80WWBT3fhxEfmbwWOD4vL/xSu6N07sbu88woPzty2PGyS5ciUyZG3V6LWOXg6NEgKA85lPOheN+M0mS2NVA5ZgAyklsCPi5AoOjOsWZvuPcDlNyVs7n3jnFhna/E/vzJkhMgNePCYcqI9tuLgoruxsvTp08so9y328N7ZlJ05g0b0lcKQKQ94SFXdlY95EkqSgCy3/9xMkj+xrac+fOjV2As50O63CNdmMCKCexIeDKAiwYNbRekLH5ie0mMQHGKvaSZlqx6I6Xy783HcAh5KeMOUFFxD9GbVJJfVs64kaRVBSB7WL9s8+WgPNai/JCJLm0C6sBlGMCKMcEUI4JoJy2FIGe728JnNvd7Pvzsy6a4RdnNfy8m5frHgw971TV7oVhPHcKncXYvYHKsSFAOSaAckwA5ZgAyjEBlGMCKMcEUI4JoBwTQDkmgHJMAOWYAMoxAZRjAijHBFCOCaAcE0A5JoByTADlmADKMQGUYwIo51/UgoWH2OzSPQAAAABJRU5ErkJggg==",te="data:image/png;base64,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",ee="data:image/png;base64,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",ie=""+new URL("tile_mine-Dj_c2A0m.png",import.meta.url).href,se=""+new URL("tile_stronghold-C_v5FfWQ.png",import.meta.url).href,re="data:image/png;base64,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";wt("jsf32");Ct(Date.now());const P={p:Wt,f:Rt,m:Gt,w:Vt,1:Ut,2:Nt,3:Jt,4:Xt,5:Kt,6:Zt,C:qt,V:$t,A:te,F:ee,M:ie,S:se,T:re};class dt{constructor(){this.levelSeed=null,this.tileSet="CCVVVVVVVVVTMAAAAAFFFFFSS",this.map="",this.start=[4,4],this.startTile="C"}}class le extends dt{constructor(){super(),this.id=1,this.map=`
            ppppp
            pppppp
            ppppppp
            pppppppp
            ppppppppp
            pppppppp
            ppppppp
            pppppp
            ppppp
        `,this.start=[4,4],this.startTile="C",this.tileSet="CCVVVVVVVVVTMAAAAAFFFFFSS"}}class he extends Map{constructor(t,i=9){super(),this.mapSize=i;let e=0;for(let s of t.trim().split(`
`)){let r=0;for(let l of s.trim())this.set(e*i+r,l),r++;e++}}at(t){try{return this.get(t[1]*this.mapSize+t[0])}catch{return}}put(t,i){this.set(t[1]*this.mapSize+t[0],i)}get hexCount(){return 3*this.mapSize*(this.mapSize-1)+1}toString(){let t="";for(let i=0;i<this.mapSize;i++){const e=Math.floor(this.mapSize/2),s=this.mapSize-Math.abs(e-i);for(let r=0;r<s;r++)t+=this.get(i*this.mapSize+r);t+=`
`}return t}*iter(){for(let t=0;t<this.mapSize;t++){const i=Math.floor(this.mapSize/2),e=this.mapSize-Math.abs(i-t);for(let s=0;s<e;s++)yield this.get(t*this.mapSize+s)}}*neighborPositions(t){const i=t[1]<=Math.floor(this.mapSize/2)?1:0,e=t[1]>=Math.floor(this.mapSize/2)?1:0,s=[[-1,0],[1,0],[-i,-1],[1-i,-1],[-e,1],[1-e,1]];for(let r of s){const l=t[0]+r[0],h=t[1]+r[1];this.has(h*this.mapSize+l)&&(yield[l,h])}}*neighborIter(t){const i=t[1]<=Math.floor(this.mapSize/2)?1:0,e=t[1]>=Math.floor(this.mapSize/2)?1:0,s=[[-1,0],[1,0],[-i,-1],[1-i,-1],[-e,1],[1-e,1]];for(let r of s){const l=t[0]+r[0],h=t[1]+r[1],n=this.at([l,h]);n&&(yield n)}}getNeighborCount(t){let i=0;for(let e of this.neighborIter(t))e!==void 0&&(i+=1);return i}hasEdge(t){return this.getNeighborCount(t)<6}getRandomPos(){let t=$(this.mapSize),i=Math.floor(this.mapSize/2),e=this.mapSize-Math.abs(i-t);return[$(e),t]}}class ne extends dt{constructor(t){super(),this.start=[4,4],this.startTile="C",this.tileSet="CCVVVVVVVVVTMAAAAAFFFFFSS";const i=`
            xxxxx
            xxxxxx
            xxxxxxx
            xxxxxxxx
            xxxxxxxxx
            xxxxxxxx
            xxxxxxx
            xxxxxx
            xxxxx
        `;let e=new he(i,t);this.makeMap(e),this.id=1,this.map=e.toString()}makeMap(t){const i=t.getRandomPos(),e=["p","p","p","f","f","m","m","w"];function s(a){const u=[...t.neighborIter(a)],c=u.reduce((y,v)=>v==="w"?y+1:y,0),f=u.filter(y=>y!=="w"),d=t.hasEdge(a);let g=[...e,...f,...f];c===1&&!d&&(g=["w"]);const b=Y(g);t.put(a,b);for(let y of bt([...t.neighborPositions(a)]))t.at(y)==="x"&&s(y)}s(i);const r=t.at(i);this.startTile=r==="w"?"T":r==="m"?"M":Y(["C","V","A","F","S"]);let l="CCVVVVVVVVAAAAFFFFS";const h=[...t.iter()].reduce((a,u)=>u==="m"?a+1:a,0),n=[...t.iter()].reduce((a,u)=>u==="w"?a+1:a,0);h>0&&this.startTile!="M"?l+="M":l+=Y(["C","V","A","F","S"]),h>2?l+="M":l+=Y(["C","V","A","F","S"]),h>5?l+="M":l+=Y(["C","V","A","F","S"]),n>0&&this.startTile!="T"?l+="M":l+=Y(["C","V","A","F","S"]),n>2?l+="T":l+=Y(["C","V","A","F","S"]),n>5?l+="T":l+=Y(["C","V","A","F","S"]),this.tileSet=l,this.start=[i[1],i[0]]}}var R=[new ne(9)];class E extends Z{code="";value=0;selected=!1;selectablePos=-1;hexPos=[-1,-1];tileColor="blue";textColor="white";score=0;scoreTiles={};scoreTerrain={};constructor(t=null){super({}),this.wLabel=null,this.player=t}place(t,i,e){if(this.selected){this.hexPos=t;let s=new K;s.add({center_x:i[0],center_y:i[1]},100),s.start(this)}}on_touch_down(t,i,e){return!!(this.collideRadius(e.rect,this.w*.43)&&this.parent instanceof V&&this.parent.onTouchDownTile(this,e))}on_selected(t,i,e){let s=this.parent;if(!(s instanceof V))return;let r=s.board;if(e){let l=new K;l.add({x:s.selectPos[0],y:s.selectPos[1]},100),l.start(this)}else{let l=this.selectablePos,h=[0*(s.board.hexSide*2+.01*s.w),r.h-(1+l)*(r.hexSide*2+.01*r.w)],n=new K;n.add({x:h[0],y:h[1]},100),n.start(this)}}production(t){return{}}}function U(o,t){for(let i of o.neighborIter(this.hexPos))if(i.tile!==null&&!(i.tile instanceof ft))return!0;return!1}class ct extends E{constructor(t=null){super(t),this.code="C",this.scoreTiles={C:-1,V:1,S:1,M:-1,T:1,A:1,F:-1,"":0},this.scoreTerrain={p:1,f:1,m:0,w:null},this.tileColor="purple",this.textColor="white",this.src=P.C}production(t){return{governance:1}}}class H extends E{constructor(t=null){super(t),this.code="V",this.scoreTiles={C:1,V:-1,S:1,M:1,T:1,A:1,F:1,"":0},this.scoreTerrain={p:1,f:1,m:0,w:null},this.tileColor="yellow",this.textColor="white",this.src=P.V}production(t){let i=0;for(let e of t.neighborIter(this.hexPos))e.tile!==null&&!(e.tile instanceof H)&&(i+=1);return{workers:i*(U(t,this.hexPos)?2:1)}}}class oe extends E{constructor(t=null){super(t),this.code="S",this.scoreTiles={C:-1,V:1,S:-1,M:1,T:1,A:1,F:1,"":0},this.scoreTerrain={p:1,f:0,m:1,w:null},this.tileColor="red",this.textColor="white",this.src=P.S}production(t){let i=0;for(let e of t.neighborIter(this.hexPos))e.tile instanceof H&&(i+=1);return{force:i*(U(t,this.hexPos)?2:1)}}}class ae extends E{constructor(t=null){super(t),this.code="M",this.scoreTiles={C:-1,V:1,S:-1,M:-1,T:1,A:1,F:1,"":0},this.scoreTerrain={p:1,f:0,m:2,w:null},this.tileColor="grey",this.textColor="white",this.src=P.M}production(t){let i=0;for(let e of t.neighborIter(this.hexPos))e instanceof gt&&(i+=1);return{gold:i*(U(t,this.hexPos)?2:1)}}}class ue extends E{constructor(t=null){super(t),this.code="T",this.scoreTiles={C:1,V:1,S:-1,M:1,T:-1,A:1,F:1,"":0},this.scoreTerrain={p:null,f:null,m:null,w:2},this.tileColor=m([.4,.2,.2,1]),this.textColor="white",this.src=P.T}production(t){return{}}}class ft extends E{constructor(t=null){super(t),this.code="A",this.scoreTiles={C:-1,V:1,S:-1,M:-1,T:1,A:-1,F:1,"":0},this.scoreTerrain={p:1,f:1,m:1,w:null},this.tileColor=m([.7,.4,.4,1]),this.textColor="white",this.src=P.A}production(t){return{}}}class de extends E{constructor(t=null){super(t),this.code="F",this.scoreTiles={C:-1,V:1,S:-1,M:-1,T:1,A:1,F:-1,"":.5},this.scoreTerrain={p:2,f:1,m:null,w:null},this.tileColor=m([.2,.5,.2,1]),this.textColor="white",this.src=P.F}production(t){let i=0;for(let e of t.neighborIter(this.hexPos))e instanceof At&&(i+=1);return{food:i*(U(t,this.hexPos)?2:1)}}}class ce extends L{score=0;code="*";hexPos=[0,0];constructor(t){super(),this.updateProperties(t);const i=this.score;this.text=i==0?"--":i>0?"+"+i:""+i,this.color="rgba(20,20,20,0.8)",this.color=this.score>0?"rgba(60,40,0,0.85)":this.score===0?"rgba(20,20,20,0.85)":"rgba(72,32,29,0.85)"}draw(t,i){i.beginPath(),i.arc(this.center_x,this.center_y,this.w/3,0,2*Math.PI),i.fillStyle=this.score>0?"rgba(255,240,0,0.5)":this.score===0?"rgba(100,100,100,0.5)":"rgba(168,72,65,0.75)",i.strokeStyle="rgba(80,80,80,0.5)",i.lineWidth=this.w/10,i.stroke(),i.fill(),super.draw(t,i)}}const it={C:ct,V:H,S:oe,M:ae,T:ue,A:ft,F:de};class N extends Z{code="";hexWidth=0;hexHeight=0;hexLen=0;hexPosX=0;hexPosY=0;texture={};constructor(t=null){super({}),t!==null&&this.updateProperties(t),this.tile=null,this.allowStretch=!0}get hexPos(){return[this.hexPosX,this.hexPosY]}set hexPos(t){[this.hexPosX,this.hexPosY]=t}on_touch_down(t,i,e){if(this.collideRadius(e.rect,this.w*.43)){let s=this.parent?.parent;if(s instanceof V)return s.onTouchDownTerrain(this,e),!0}return!1}}class At extends N{constructor(t){super(t),this.code="p",this.src=P.p}}class fe extends N{constructor(t){super(t),this.code="f",this.src=P.f}}class gt extends N{constructor(t){super(t),this.code="m",this.src=P.m}}class Ae extends N{constructor(t){super(t),this.code="w",this.src=P.w}}const ge={p:At,f:fe,m:gt,w:Ae};class st extends Array{constructor(t,i){super();for(let r=0;r<i;++r)this.push([]);this.size=i;let e=0,s;t===null?s=new le().map.replace(/\n/g,"").replace(/ /g,""):s=t.map.replace(/\n/g,"").replace(/ /g,"");for(let r=0;r<this.size;r++){let l=this.size-Math.abs((this.size-1)/2-r);for(let h=0;h<l;h++){let n=new ge[s[e]]({hexPos:[r,h]});this[r].push(n),e++}}}*iter(){for(let t of this)for(let i of t)yield i}at(t,i){try{return this[t][i]}catch{return}}set(t,i,e){this[t][i]=e}}class pe extends S{boardSize=1;boardWidth=1;boardHeight=1;hexWidth=1;hexSide=1;hexHeight=1;bgColor="rgba(25, 102, 153, 1.0)";constructor(t={}){super(),t&&this.updateProperties(t),this._terrainMap=new st(null,this.boardSize);for(let i of this._terrainMap.iter())this.addChild(i)}set terrainMap(t){for(let i of this._terrainMap.iter())this.removeChild(i);this._terrainMap=t;for(let i of this._terrainMap.iter())this.addChild(i)}get terrainMap(){return this._terrainMap}makeTerrain(t){this.terrainMap=new st(t,this.boardSize)}pixelPos(t){return[this.center_x+this.hexSide*1.5*(t[0]-Math.floor(this.boardSize/2)),this.center_y+this.hexHeight*(t[1]-Math.floor(this.boardSize/2)+Math.abs(t[0]-Math.floor(this.boardSize/2))/2)]}hexPos(t){const i=Math.round((t[0]-this.center_x)/(this.hexSide*1.5)+Math.floor(this.boardSize/2)),e=Math.round((t[1]-this.center_y)/this.hexHeight+Math.floor(this.boardSize/2)-Math.abs(i-Math.floor(this.boardSize/2))/2);return 0<=i&&i<this.boardSize&&0<=e&&e<this.boardSize?[i,e]:null}get hexCount(){return 3*this.boardSize*(this.boardSize-1)+1}*neighborIter(t){const i=t[0]<=Math.floor(this.boardSize/2)?1:0,e=t[0]>=Math.floor(this.boardSize/2)?1:0,s=[[0,-1],[0,1],[-1,-i],[-1,1-i],[1,-e],[1,1-e]];for(let r of s){const l=t[0]+r[0],h=t[1]+r[1],n=this._terrainMap.at(l,h);n&&(yield n)}}getNeighborCount(t){let i=0;for(let e of this.neighborIter(t))e.tile!==null&&(i+=1);return i}layoutChildren(){this.hexSide=Math.min(this.w/(1.5*this.boardSize+1),.95*this.h/(this.boardSize*Math.sqrt(3))),this.hexWidth=this.hexSide*2,this.hexHeight=this.hexSide*Math.sqrt(3),this.boardHeight=this.hexHeight*this.boardSize,this.boardWidth=this.hexSide*(1.5*this.boardSize+1);for(let t=0;t<this.boardSize;t++){let i=this.boardSize-Math.abs(Math.floor((this.boardSize-1)/2)-t);for(let e=0;e<i;e++){let s=this.pixelPos([t,e]),r=this._terrainMap.at(t,e);r&&(r.w=this.hexWidth,r.h=this.hexWidth,r.center_x=s[0],r.center_y=s[1],r.layoutChildren())}}}}class V extends S{constructor(){super(),this.board=new pe({hints:{x:0,y:0,w:1,h:1}}),this.addChild(this.board),this.level=null,this.tiles=[],this.selectableTiles=[],this.placementLayer=new S({hints:{x:0,y:0,w:1,h:1}}),this.addChild(this.placementLayer),this.tileStack=[],this.selectedTile=null,this.activePlayer=0,this.players=[],this.selectPos=[0,0],this.scoreboard=new W({align:"right",hints:{right:.99,y:.01,w:1,h:.05}}),this.addChild(this.scoreboard),this.gameOver=!1,this.wStateLabel=new L({text:"",color:"white",align:"right",hints:{right:.99,bottom:.99,w:1,h:.05}}),this.addChild(this.wStateLabel)}updateScores(t=null){if(t!==null){this.scoreTile(t);for(let i of this.board.neighborIter(t.hexPos))i.tile!==null&&this.scoreTile(i)}for(let i of this.players){let e=0;for(let s of i.placedTiles)e+=s.score;i.scoreMarker.score=e}}placeTile(t,i=!0){if(!this.gameOver&&this.selectedTile!==null){const e=t.hexPos,s=this.board.terrainMap.at(...e);if(s===void 0||s.tile!==null)return;const r=this.board.pixelPos(e);this.selectedTile.place(e,r,this.players[this.activePlayer]);const l=this.selectableTiles.indexOf(this.selectedTile);l>-1&&this.selectableTiles.splice(l,1),t.tile=this.selectedTile,this.clearPlacementTargets(),this.players[this.activePlayer].placedTiles.push(this.selectedTile),this.selectedTile.selectablePos=-1,this.selectedTile.bgColor=null,this.selectedTile=null,this.updateScores(t),this.drawNewTile(),this.nextPlayer()}}selectTile(t,i=!0){return this.selectedTile!==null&&this.selectedTile!==t&&(this.selectedTile.selected=!1,this.selectedTile=null),!this.gameOver&&this.selectedTile===null&&this.selectableTiles.includes(t)&&(this.selectableTiles.indexOf(t),t.selected=!0,this.selectedTile=t),!1}onTouchDownTerrain(t,i){if(this.gameOver||this.selectedTile===null||this.selectedTile.scoreTerrain[t.code]===null)return!0;const e=this.players[this.activePlayer];return!e.localControl||!this.hasNeighbor(e,t)?!0:this.placeTile(t)}hasNeighbor(t,i){if(t.placedTiles.length>0){for(let e of this.board.neighborIter(i.hexPos))if(t.placedTiles.includes(e.tile))return!0}return!1}onTouchDownTile(t,i){if(this.gameOver)return!0;if(t.hexPos[0]!==-1&&t.hexPos[1]!==-1)return!1;const e=this.players[this.activePlayer];if(e.localControl)this.wStateLabel.text="Place tile",this.wStateLabel.color=e.color,this.setPlacementTargets(t);else return!0;return this.selectTile(t)}scoreTile(t){return t.tile.score=this.getTileScore(t,t.tile),t.tile.score}getTileScore(t,i){let e=i.scoreTerrain[t.code];for(let s of this.board.neighborIter(t.hexPos))s.tile!==null&&(e+=i.scoreTiles[s.tile.code]);return e}setPlacementTargets(t){this.clearPlacementTargets();let i=this.players[this.activePlayer];if(!this.board.terrainMap)return;let e=[];for(let s of this.board.terrainMap.iter()){if(s.tile!==null||!this.hasNeighbor(i,s)||t.scoreTerrain[s.code]===null)continue;let r=this.getTileScore(s,t);for(let n of this.board.neighborIter(s.hexPos))n.tile!==null&&(r+=n.tile.scoreTiles[t.code]);let l=new ce({w:this.board.hexSide*2,h:this.board.hexSide*2,score:r,hexPos:s.hexPos.slice()}),h=this.board.pixelPos(s.hexPos);l.center_x=h[0],l.center_y=h[1],e.push(l)}this.placementLayer.children=e}clearPlacementTargets(){this.placementLayer.children=[]}removePlayers(){this.activePlayer=0,this.selectedTile=null;for(let t of this.players)t.delete();this.players=[]}clearLevel(){this.board.makeTerrain(null);for(let t of this.selectableTiles)this.removeChild(t);this.selectableTiles=[]}setupLevel(t=null){if(t!==null&&(this.level=t),this.level===null)return;this.board.makeTerrain(this.level);let i=this.players[this.activePlayer];this.selectableTiles=[new ct(i),new H(i),new H(i)];let e=0;for(let r of this.selectableTiles)r.selectablePos=e,r.bgColor="gray",this.addChild(r),e++;this.tileStack=[...this.level.tileSet].map(r=>new it[r]),this.tileStack.sort(()=>Math.random()-.5);let s=new it[this.level.startTile];if(s.hexPos=this.level.start,this.addChild(s),this.board.terrainMap&&this.level){let r=this.board.terrainMap.at(this.level.start[0],this.level.start[1]);r&&(r.tile=s,this.players[this.activePlayer].placedTiles.push(s),this.scoreTile(r),this.updateScores())}}setupGame(t,i=null){this.gameOver=!1,this.wStateLabel.text="",this.wStateLabel.color="white",this.removePlayers(),this.clearLevel(),t.length===1?(this.board.boardSize=9,this.tilesCount=24):t.length===2?(this.board.boardSize=9,this.tilesCount=24):t.length===3?(this.board.boardSize=9,this.tilesCount=24):t.length===4?(this.board.boardSize=9,this.tilesCount=24):(this.board.boardSize=9,this.tilesCount=24);for(let e of t)e.type===0&&this.players.push(new me(e.name,e.color,this));this.setupLevel(i)}startGame(){this.nextPlayer()}nextPlayer(){if(this.activePlayer>=0&&(this.players[this.activePlayer].endTurn(),this.selectableTiles.length===0)){this.showGameOver();return}this.activePlayer+=1,this.activePlayer>=this.players.length&&(this.activePlayer=0);let t=this.players[this.activePlayer];t.startTurn(),t.localControl?(this.wStateLabel.text="Select tile",this.wStateLabel.color=t.color):(this.wStateLabel.text="",this.wStateLabel.color="white")}showGameOver(){let t=this.players.map(s=>s.scoreMarker.score),i=Math.max(...t),e=this.players.filter((s,r)=>t[r]===i);if(this.gameOver=!0,this.players.length===1){let s="You bankrupted the kingdom!";i>40&&(s="Time to find another job"),i>60&&(s="The people are happy"),i>80&&(s="The people are joyous!"),i>90&&(s="Welcome to the history books"),i>100&&(s="Hail to the king!"),this.wStateLabel.color=e[0].color,this.wStateLabel.text=`Game over - ${s}`}else e.length===1?(this.wStateLabel.color=e[0].color,this.wStateLabel.text=`Game over - ${e[0].name} wins`):(this.wStateLabel.color="white",this.wStateLabel.text="Game over - draw")}drawNewTile(){let t=this.board.hexSide;if(this.tileStack.length===0)return;let i=this.tileStack.pop();i.bgColor="gray",this.selectableTiles.push(i),this.addChild(i);for(let e=0;e<this.selectableTiles.length;e++){let s=this.selectableTiles[e];s.selectablePos=e,[s.x,s.y]=[0*(t*2+.01*this.w),this.h-(1+e)*(t*2+.01*this.w)],[s.w,s.h]=[t*2,t*2]}}layoutChildren(){this.applyHints(this.board),this.board.layoutChildren();let t=this.board.hexSide;this.selectPos=[3*(t*2+.01*this.w),this.h-t*2-.01*this.w];for(let i of this.players)i.boardResize(t);for(let i of this.placementLayer.children){let e=this.board.pixelPos(i.hexPos);i.w=t*2,i.h=t*2,i.center_x=e[0],i.center_y=e[1]}this.applyHints(this.scoreboard),this.scoreboard.layoutChildren();for(let i=0;i<this.selectableTiles.length;i++){let e=this.selectableTiles[i];e.selected?[e.x,e.y]=this.selectPos:(e.x=0*(t*2+.01*this.w),e.y=this.h-(1+i)*(t*2+.01*this.w)),e.w=t*2,e.h=t*2,this.applyHints(e),e.layoutChildren()}this.applyHints(this.wStateLabel),this.wStateLabel.layoutChildren(),this._needsLayout=!1}}class rt{constructor(t,i,e){this.name=t,this.color=i,this.type=e}}class we extends L{constructor(t,i){super(),this.ident=t,this.color=i,this.score=0,this.activeTurn=!1,this.align="right"}on_score(t,i,e){this.text="Score: "+Math.floor(this.score)}}class me{constructor(t,i,e){this.localControl=!0,this.name=t,this.color=i,this.screen=e,this.placedTiles=[],this.scoreMarker=new we(this.name.substring(0,2),i),this.screen.scoreboard.addChild(this.scoreMarker)}delete(){this.reset(),this.screen.scoreboard.removeChild(this.scoreMarker);for(let t of this.placedTiles)this.screen.removeChild(t);this.placedTiles=[]}reset(){this.scoreMarker.activeTurn=!1,this.scoreMarker.score=0;for(let t of this.placedTiles)this.screen.removeChild(t);this.placedTiles=[]}startTurn(){this.scoreMarker.activeTurn=!0}endTurn(){this.scoreMarker.activeTurn=!1}boardResize(t){for(let i of this.placedTiles)i._animation||(i.w=t*2,i.h=t*2,[i.center_x,i.center_y]=i.parent.board.pixelPos(i.hexPos))}}const ye={0:[.6,0,0,1],1:[0,.6,0,1],2:[0,0,.6,1],3:[.5,0,.5,1],4:[.5,.5,0,1]};class be extends W{constructor(t){super(t),this.playerCount=0,this.players=[],this.wGame=new V,this.addChild(this.wGame),this.level=R[0],this.playerSpec=[],this.startSpGame(this.level)}restartGame(){let t=this.wGame;t.setupGame(this.playerSpec,R[0]),t.startGame(),this.current="game"}startGame(){let t=new rt("Player "+String(1),ye[0],0);this.playerSpec=[t],this.wGame.setupGame(this.playerSpec,R[0]),this.wGame.startGame(),this.current="game"}startSpGame(t){this.playerSpec=[new rt("Player "+String(1),"white",0)],this.wGame.setupGame(this.playerSpec,R[0]),this.wGame.startGame(),this.current="game"}}class Ce extends A{constructor(){super(),this._baseWidget.children=[new be({hints:{x:0,y:0,w:1,h:1}})]}}var Me=new Ce;Me.start();
